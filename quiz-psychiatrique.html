<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionnaire d'Auto-Observation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f8f6f3;
            --bg-card: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #5a5a5a;
            --text-muted: #8a8a8a;
            --accent-bip: #6366f1;
            --accent-bip-light: #e0e7ff;
            --accent-bpd: #ec4899;
            --accent-bpd-light: #fce7f3;
            --accent-dep: #475569;
            --accent-dep-light: #e2e8f0;
            --border: #e5e5e5;
            --shadow: 0 4px 24px rgba(0,0,0,0.06);
            --radius: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 680px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 48px;
        }

        .header h1 {
            font-family: 'Fraunces', serif;
            font-size: clamp(1.75rem, 5vw, 2.25rem);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1rem;
            max-width: 480px;
            margin: 0 auto;
        }

        /* Disclaimer */
        .disclaimer {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: var(--radius);
            padding: 20px 24px;
            margin-bottom: 32px;
            border-left: 4px solid #f59e0b;
        }

        .disclaimer p {
            font-size: 0.9rem;
            color: #92400e;
            font-weight: 500;
        }

        /* Progress Bar */
        .progress-container {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .progress-text {
            font-weight: 600;
            color: var(--text-primary);
        }

        .progress-count {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .progress-bar {
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-bip), var(--accent-bpd));
            border-radius: 4px;
            transition: width 0.4s ease;
            width: 0%;
        }

        /* Question Card */
        .question-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.5s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-number {
            display: inline-block;
            background: var(--bg-primary);
            color: var(--text-muted);
            font-size: 0.75rem;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .question-text {
            font-family: 'Fraunces', serif;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 24px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            position: relative;
        }

        .option input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .option label {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            background: var(--bg-primary);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .option label:hover {
            background: #f0eeeb;
        }

        .option input:checked + label {
            background: var(--accent-bip-light);
            border-color: var(--accent-bip);
        }

        .option-indicator {
            width: 22px;
            height: 22px;
            border: 2px solid var(--border);
            border-radius: 50%;
            margin-right: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .option input:checked + label .option-indicator {
            border-color: var(--accent-bip);
            background: var(--accent-bip);
        }

        .option input:checked + label .option-indicator::after {
            content: '';
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }

        /* Navigation */
        .navigation {
            display: flex;
            gap: 12px;
            justify-content: space-between;
        }

        .btn {
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            font-family: inherit;
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-secondary);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-primary);
        }

        .btn-primary {
            background: var(--text-primary);
            color: white;
            flex: 1;
            max-width: 200px;
        }

        .btn-primary:hover {
            background: #333;
            transform: translateY(-1px);
        }

        .btn-primary:disabled {
            background: var(--border);
            color: var(--text-muted);
            cursor: not-allowed;
            transform: none;
        }

        .btn-results {
            background: linear-gradient(135deg, var(--accent-bip), var(--accent-bpd));
            width: 100%;
            max-width: none;
            padding: 18px 32px;
            font-size: 1.1rem;
        }

        .btn-results:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
        }

        /* Results */
        .results-container {
            display: none;
        }

        .results-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .results-header h2 {
            font-family: 'Fraunces', serif;
            font-size: 1.75rem;
            margin-bottom: 8px;
        }

        .score-cards {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 32px;
        }

        .score-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
        }

        .score-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .score-label {
            font-weight: 600;
            font-size: 1rem;
        }

        .score-value {
            font-family: 'Fraunces', serif;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .score-bar {
            height: 12px;
            background: var(--border);
            border-radius: 6px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 1s ease;
        }

        .score-card.bip .score-fill { background: var(--accent-bip); }
        .score-card.bip .score-value { color: var(--accent-bip); }
        .score-card.bpd .score-fill { background: var(--accent-bpd); }
        .score-card.bpd .score-value { color: var(--accent-bpd); }
        .score-card.dep .score-fill { background: var(--accent-dep); }
        .score-card.dep .score-value { color: var(--accent-dep); }

        .dominant-profile {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 28px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--accent-bip);
        }

        .dominant-profile h3 {
            font-family: 'Fraunces', serif;
            font-size: 1.25rem;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .dominant-profile p {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 12px;
        }

        .dominant-profile p:last-child {
            margin-bottom: 0;
        }

        .clinical-notes {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 24px;
            border-left: 4px solid #ef4444;
        }

        .clinical-notes h4 {
            color: #991b1b;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .clinical-notes p {
            color: #7f1d1d;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .restart-btn {
            width: 100%;
            padding: 16px;
            background: var(--bg-primary);
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .restart-btn:hover {
            background: var(--border);
        }

        .hidden {
            display: none !important;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 24px 16px;
            }

            .question-card {
                padding: 24px 20px;
            }

            .navigation {
                flex-direction: column;
            }

            .btn-primary {
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Questionnaire d'Auto-Observation</h1>
            <p>Prenez le temps de r√©pondre honn√™tement √† chaque question en pensant √† vos exp√©riences des derniers mois.</p>
        </header>

        <div class="disclaimer">
            <p>‚ö†Ô∏è Ce questionnaire est un outil d'auto-r√©flexion et ne constitue en aucun cas un diagnostic m√©dical. Seul un professionnel de sant√© mentale peut poser un diagnostic.</p>
        </div>

        <div id="quiz-container">
            <div class="progress-container">
                <div class="progress-info">
                    <span class="progress-text">Progression</span>
                    <span class="progress-count"><span id="current-q">1</span>/25</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>

            <div id="question-container"></div>

            <div class="navigation">
                <button class="btn btn-secondary hidden" id="prev-btn" onclick="prevQuestion()">‚Üê Pr√©c√©dent</button>
                <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" disabled>Suivant ‚Üí</button>
            </div>
        </div>

        <div class="results-container" id="results-container">
            <div class="results-header">
                <h2>Vos R√©sultats</h2>
                <p>Voici l'analyse de vos r√©ponses</p>
            </div>

            <div class="score-cards">
                <div class="score-card bip">
                    <div class="score-header">
                        <span class="score-label">üîµ Profil Cyclique (BiP)</span>
                        <span class="score-value" id="score-bip">0%</span>
                    </div>
                    <div class="score-bar">
                        <div class="score-fill" id="bar-bip" style="width: 0%"></div>
                    </div>
                </div>

                <div class="score-card bpd">
                    <div class="score-header">
                        <span class="score-label">üî¥ Profil R√©actif (BPD)</span>
                        <span class="score-value" id="score-bpd">0%</span>
                    </div>
                    <div class="score-bar">
                        <div class="score-fill" id="bar-bpd" style="width: 0%"></div>
                    </div>
                </div>

                <div class="score-card dep">
                    <div class="score-header">
                        <span class="score-label">‚ö´ Profil D√©pressif (DEP)</span>
                        <span class="score-value" id="score-dep">0%</span>
                    </div>
                    <div class="score-bar">
                        <div class="score-fill" id="bar-dep" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <div class="dominant-profile" id="dominant-profile">
                <h3>Profil Dominant</h3>
                <p id="profile-text"></p>
                <p id="profile-description"></p>
            </div>

            <div class="clinical-notes" id="clinical-notes">
                <h4>‚öïÔ∏è Points d'attention cliniques</h4>
                <p id="clinical-text"></p>
            </div>

            <button class="restart-btn" onclick="restartQuiz()">‚Ü∫ Recommencer le questionnaire</button>
        </div>
    </div>

    <script>
        const questions = [
            // BiP Questions (8)
            {
                id: 1,
                text: "Vous arrive-t-il de dormir tr√®s peu (3-5 heures) pendant plusieurs jours et de vous sentir parfaitement en forme, voire plus √©nergique que d'habitude ?",
                type: "bip"
            },
            {
                id: 2,
                text: "Avez-vous v√©cu des p√©riodes o√π votre humeur s'est nettement am√©lior√©e sans raison particuli√®re, comme si un interrupteur s'√©tait allum√© ?",
                type: "bip"
            },
            {
                id: 3,
                text: "Pendant certaines p√©riodes, avez-vous l'impression que vos pens√©es vont plus vite que d'habitude, avec beaucoup d'id√©es qui s'encha√Ænent ?",
                type: "bip"
            },
            {
                id: 4,
                text: "Vous est-il arriv√© de d√©marrer plusieurs projets en m√™me temps avec enthousiasme, puis de les abandonner quelques semaines plus tard ?",
                type: "bip"
            },
            {
                id: 5,
                text: "Avez-vous connu des p√©riodes o√π vous vous sentiez exceptionnellement confiant(e), capable de tout r√©ussir ?",
                type: "bip"
            },
            {
                id: 6,
                text: "Pendant certaines phases, avez-vous fait des d√©penses inhabituelles, pris des risques au volant, ou eu des comportements sexuels plus intenses que d'ordinaire ?",
                type: "bip"
            },
            {
                id: 7,
                text: "Vos proches vous ont-ils d√©j√† fait remarquer que vous parliez plus vite ou que vous √©tiez plus agit√©(e) que d'habitude pendant certaines p√©riodes ?",
                type: "bip"
            },
            {
                id: 8,
                text: "Reconnaissez-vous des cycles distincts dans votre humeur, avec des hauts et des bas qui durent plusieurs semaines ?",
                type: "bip"
            },

            // BPD Questions (9)
            {
                id: 9,
                text: "Quand quelqu'un que vous aimez met du temps √† vous r√©pondre, ressentez-vous rapidement de l'angoisse ou de l'irritation ?",
                type: "bpd"
            },
            {
                id: 10,
                text: "Vous arrive-t-il de changer radicalement d'opinion sur une personne proche en l'espace de quelques heures ou jours ?",
                type: "bpd"
            },
            {
                id: 11,
                text: "Ressentez-vous souvent un vide int√©rieur difficile √† d√©crire, m√™me quand les choses vont bien dans votre vie ?",
                type: "bpd"
            },
            {
                id: 12,
                text: "Vous arrive-t-il de faire des choses impulsives (manger, acheter, etc.) principalement pour calmer une √©motion intense ?",
                type: "bpd"
            },
            {
                id: 13,
                text: "Avez-vous d√©j√† eu recours √† vous faire du mal physiquement (vous couper, vous br√ªler) pour soulager une douleur √©motionnelle ?",
                type: "bpd"
            },
            {
                id: 14,
                text: "Votre humeur est-elle fortement influenc√©e par la qualit√© de vos relations avec une ou deux personnes en particulier ?",
                type: "bpd"
            },
            {
                id: 15,
                text: "Votre estime de vous-m√™me peut-elle passer de ¬´ je suis nul(le) ¬ª √† ¬´ je suis quelqu'un de bien ¬ª plusieurs fois dans une m√™me journ√©e ou semaine ?",
                type: "bpd"
            },
            {
                id: 16,
                text: "Lors de conflits relationnels intenses, vous arrive-t-il de vous sentir d√©connect√©(e) de vous-m√™me ou de la r√©alit√© ?",
                type: "bpd"
            },
            {
                id: 17,
                text: "Faites-vous des efforts importants pour √©viter d'√™tre abandonn√©(e), m√™me si ce risque n'est pas toujours r√©el ?",
                type: "bpd"
            },

            // DEP Questions (8)
            {
                id: 18,
                text: "Y a-t-il des p√©riodes o√π vous ressentez le besoin de dormir beaucoup plus que d'habitude, parfois 12 heures ou plus ?",
                type: "dep"
            },
            {
                id: 19,
                text: "Vous sentez-vous souvent fatigu√©(e) m√™me apr√®s une longue nuit de sommeil ?",
                type: "dep"
            },
            {
                id: 20,
                text: "Avez-vous perdu l'int√©r√™t ou le plaisir pour des activit√©s que vous aimiez auparavant ?",
                type: "dep"
            },
            {
                id: 21,
                text: "Avez-vous souvent l'impression de ne servir √† rien ou d'√™tre un poids pour les autres ?",
                type: "dep"
            },
            {
                id: 22,
                text: "Avez-vous tendance √† vous isoler et √† √©viter les contacts sociaux quand vous ne vous sentez pas bien ?",
                type: "dep"
            },
            {
                id: 23,
                text: "Trouvez-vous difficile de vous motiver pour accomplir des t√¢ches simples du quotidien ?",
                type: "dep"
            },
            {
                id: 24,
                text: "Avez-vous du mal √† vous concentrer, comme si votre esprit √©tait dans le brouillard ?",
                type: "dep"
            },
            {
                id: 25,
                text: "Avez-vous des pens√©es sombres r√©currentes, un sentiment que l'avenir est sans espoir ?",
                type: "dep"
            }
        ];

        // Shuffle questions
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        let shuffledQuestions = shuffleArray(questions);
        let currentQuestion = 0;
        let answers = {};

        function renderQuestion() {
            const q = shuffledQuestions[currentQuestion];
            const container = document.getElementById('question-container');
            
            container.innerHTML = `
                <div class="question-card" key="${currentQuestion}">
                    <span class="question-number">Question ${currentQuestion + 1}</span>
                    <p class="question-text">${q.text}</p>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q${q.id}" id="q${q.id}_yes" value="yes" ${answers[q.id] === 'yes' ? 'checked' : ''} onchange="selectAnswer('${q.id}', 'yes')">
                            <label for="q${q.id}_yes">
                                <span class="option-indicator"></span>
                                Oui
                            </label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q${q.id}" id="q${q.id}_no" value="no" ${answers[q.id] === 'no' ? 'checked' : ''} onchange="selectAnswer('${q.id}', 'no')">
                            <label for="q${q.id}_no">
                                <span class="option-indicator"></span>
                                Non
                            </label>
                        </div>
                    </div>
                </div>
            `;

            // Update progress
            document.getElementById('current-q').textContent = currentQuestion + 1;
            document.getElementById('progress-fill').style.width = `${((currentQuestion + 1) / 25) * 100}%`;

            // Update buttons
            document.getElementById('prev-btn').classList.toggle('hidden', currentQuestion === 0);
            
            const nextBtn = document.getElementById('next-btn');
            if (currentQuestion === 24) {
                nextBtn.textContent = 'Voir les r√©sultats';
                nextBtn.classList.add('btn-results');
            } else {
                nextBtn.textContent = 'Suivant ‚Üí';
                nextBtn.classList.remove('btn-results');
            }
            
            nextBtn.disabled = !answers[q.id];
        }

        function selectAnswer(qId, value) {
            answers[qId] = value;
            document.getElementById('next-btn').disabled = false;
        }

        function nextQuestion() {
            if (currentQuestion < 24) {
                currentQuestion++;
                renderQuestion();
            } else {
                showResults();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }

        function calculateScores() {
            let bipYes = 0, bipTotal = 0;
            let bpdYes = 0, bpdTotal = 0;
            let depYes = 0, depTotal = 0;

            questions.forEach(q => {
                if (q.type === 'bip') {
                    bipTotal++;
                    if (answers[q.id] === 'yes') bipYes++;
                } else if (q.type === 'bpd') {
                    bpdTotal++;
                    if (answers[q.id] === 'yes') bpdYes++;
                } else if (q.type === 'dep') {
                    depTotal++;
                    if (answers[q.id] === 'yes') depYes++;
                }
            });

            return {
                bip: Math.round((bipYes / bipTotal) * 100),
                bpd: Math.round((bpdYes / bpdTotal) * 100),
                dep: Math.round((depYes / depTotal) * 100)
            };
        }

        function showResults() {
            const scores = calculateScores();
            
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('results-container').style.display = 'block';

            // Animate scores
            setTimeout(() => {
                document.getElementById('score-bip').textContent = scores.bip + '%';
                document.getElementById('bar-bip').style.width = scores.bip + '%';
                
                document.getElementById('score-bpd').textContent = scores.bpd + '%';
                document.getElementById('bar-bpd').style.width = scores.bpd + '%';
                
                document.getElementById('score-dep').textContent = scores.dep + '%';
                document.getElementById('bar-dep').style.width = scores.dep + '%';
            }, 100);

            // Determine dominant profile
            const maxScore = Math.max(scores.bip, scores.bpd, scores.dep);
            let profileText = '';
            let profileDesc = '';
            let clinicalText = '';

            // Build profile analysis
            const highScores = [];
            if (scores.bip >= 50) highScores.push({ name: 'Cyclique (BiP)', score: scores.bip });
            if (scores.bpd >= 50) highScores.push({ name: 'R√©actif (BPD)', score: scores.bpd });
            if (scores.dep >= 50) highScores.push({ name: 'D√©pressif (DEP)', score: scores.dep });

            if (highScores.length === 0) {
                profileText = 'Aucun profil fortement marqu√©';
                profileDesc = 'Vos r√©ponses ne montrent pas de tendance dominante claire. Cela peut indiquer un fonctionnement √©quilibr√© ou des sympt√¥mes sub-cliniques. Si vous ressentez une souffrance, une consultation reste pertinente.';
            } else if (highScores.length === 1) {
                profileText = `Profil ${highScores[0].name} (${highScores[0].score}%)`;
                if (highScores[0].name.includes('BiP')) {
                    profileDesc = 'Vos r√©ponses sugg√®rent un fonctionnement avec des variations cycliques de l\'humeur et de l\'√©nergie. Ces variations semblent survenir de fa√ßon spontan√©e, avec des p√©riodes distinctes de haute √©nergie.';
                } else if (highScores[0].name.includes('BPD')) {
                    profileDesc = 'Vos r√©ponses sugg√®rent une sensibilit√© importante aux relations interpersonnelles, avec des √©motions intenses et r√©actives aux √©v√©nements relationnels.';
                } else {
                    profileDesc = 'Vos r√©ponses sugg√®rent une tendance d√©pressive avec fatigue, perte d\'int√©r√™t et repli sur soi. Ces sympt√¥mes semblent persistants plut√¥t que r√©actifs.';
                }
            } else {
                const sorted = highScores.sort((a, b) => b.score - a.score);
                profileText = `Profil mixte : ${sorted.map(s => `${s.name} ${s.score}%`).join(' + ')}`;
                
                if (scores.bpd >= 50 && scores.dep >= 50) {
                    profileDesc = 'La combinaison BPD + D√©pression est fr√©quente. La d√©pression peut √™tre secondaire √† la dysr√©gulation √©motionnelle. Il est important de distinguer si la d√©pression est primaire ou r√©actionnelle aux difficult√©s relationnelles.';
                } else if (scores.bip >= 50 && scores.dep >= 50) {
                    profileDesc = 'La pr√©sence de traits cycliques avec des √©pisodes d√©pressifs est coh√©rente avec un spectre bipolaire. Les phases d√©pressives peuvent √™tre plus fr√©quentes que les phases hautes.';
                } else if (scores.bip >= 50 && scores.bpd >= 50) {
                    profileDesc = 'Cette combinaison n√©cessite une √©valuation approfondie car les deux profils peuvent coexister ou √™tre confondus. L\'instabilit√© √©motionnelle du BPD peut mimer des cycles rapides.';
                } else {
                    profileDesc = 'Votre profil pr√©sente des caract√©ristiques de plusieurs patterns. Une √©valuation professionnelle permettrait de clarifier le tableau clinique.';
                }
            }

            document.getElementById('profile-text').textContent = profileText;
            document.getElementById('profile-description').textContent = profileDesc;

            // Clinical warnings
            const warnings = [];
            
            if (scores.bip >= 70) {
                warnings.push('‚ö†Ô∏è Score BiP √©lev√© : Un traitement antid√©presseur ISRS seul pourrait pr√©senter un risque de virage maniaque. Une √©valuation sp√©cialis√©e est recommand√©e avant toute prescription.');
            }
            if (scores.bpd >= 70 && scores.dep >= 50) {
                warnings.push('La d√©pression dans un contexte BPD r√©pond souvent mieux √† une psychoth√©rapie sp√©cialis√©e (DBT, MBT) qu\'aux antid√©presseurs seuls.');
            }
            if (scores.dep >= 75 && scores.bip < 40) {
                warnings.push('Score d√©pressif √©lev√© sans composante cyclique : un traitement antid√©presseur classique pourrait √™tre appropri√©, √† √©valuer avec un professionnel.');
            }
            if (answers[13] === 'yes') {
                warnings.push('Vous avez mentionn√© des comportements d\'automutilation. Si cela persiste, il est important d\'en parler √† un professionnel de sant√©.');
            }
            if (answers[25] === 'yes') {
                warnings.push('Si vos pens√©es sombres deviennent envahissantes ou si vous pensez √† vous faire du mal, contactez un service d\'aide : 3114 (num√©ro national de pr√©vention du suicide).');
            }

            if (warnings.length === 0) {
                document.getElementById('clinical-notes').classList.add('hidden');
            } else {
                document.getElementById('clinical-text').innerHTML = warnings.join('<br><br>');
            }
        }

        function restartQuiz() {
            currentQuestion = 0;
            answers = {};
            shuffledQuestions = shuffleArray(questions);
            
            document.getElementById('results-container').style.display = 'none';
            document.getElementById('quiz-container').classList.remove('hidden');
            
            renderQuestion();
        }

        // Initialize
        renderQuestion();
    </script>
</body>
</html>
