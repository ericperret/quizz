<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triage P√©diatrique - Martinique</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
            color: #333;
        }
        h1 { text-align: center; color: #2c3e50; }
        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        
        /* Mode switch */
        .mode-switch {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .mode-switch button {
            padding: 12px 30px;
            font-size: 1em;
            border: 2px solid #007bff;
            background: white;
            color: #007bff;
            cursor: pointer;
        }
        .mode-switch button:first-child { border-radius: 8px 0 0 8px; }
        .mode-switch button:last-child { border-radius: 0 8px 8px 0; border-left: none; }
        .mode-switch button.active { background: #007bff; color: white; }
        
        #mode-triage, #mode-reverse { display: none; }
        #mode-triage.active, #mode-reverse.active { display: block; }
        
        /* Cat√©gories */
        .category {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .category h2 {
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            font-size: 1.2em;
        }
        .symptom-item { margin: 10px 0; }
        .symptom-item > label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: 500;
        }
        .symptom-item > label input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }
        .sub-options {
            display: none;
            margin-left: 35px;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid #007bff;
        }
        .sub-options.visible { display: block; }
        .sub-options label { display: block; margin: 5px 0; cursor: pointer; }
        .sub-options input[type="radio"],
        .sub-options input[type="checkbox"] { margin-right: 8px; }
        .red-flag { color: #dc3545; }
        .red-flag::after { content: " ‚ö†Ô∏è"; }
        
        /* Boutons */
        button#analyser {
            display: block;
            width: 100%;
            padding: 15px 30px;
            font-size: 1.2em;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 20px 0;
        }
        button#reset {
            display: block;
            width: 100%;
            padding: 10px;
            font-size: 1em;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        /* R√©sultats */
        #resultat { display: none; padding: 25px; border-radius: 10px; margin-top: 20px; }
        #resultat.niveau-rouge { background: #f8d7da; border: 2px solid #dc3545; }
        #resultat.niveau-orange { background: #ffe5d0; border: 2px solid #fd7e14; }
        #resultat.niveau-jaune { background: #fff3cd; border: 2px solid #ffc107; }
        #resultat.niveau-vert { background: #d4edda; border: 2px solid #28a745; }
        #resultat h3 { margin-top: 0; display: flex; align-items: center; gap: 10px; }
        
        .pathologies-probables, .conseils, .surveillance {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.7);
            border-radius: 8px;
        }
        .pathologies-probables h4, .conseils h4, .surveillance h4 { margin-top: 0; }
        
        /* Carte pathologie avec crit√®res */
        .patho-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #ddd;
        }
        .patho-card.top { border: 2px solid #007bff; background: #f0f7ff; }
        .patho-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .patho-score {
            background: #007bff;
            color: white;
            padding: 3px 12px;
            border-radius: 12px;
            font-weight: bold;
        }
        .patho-desc { font-size: 0.9em; color: #666; margin-bottom: 10px; }
        
        /* Crit√®res color√©s */
        .criteres-box { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
        .critere-tag {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            display: inline-block;
        }
        .critere-attendu { background: #d4edfc; color: #1a5276; }
        .critere-exclusion { background: #fadbd8; color: #922b21; }
        .critere-match { box-shadow: 0 0 0 3px #27ae60; }
        
        /* Mode r√©f√©rence */
        .maladie-select {
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .maladie-detail {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .maladie-detail h3 { margin-top: 0; color: #2c3e50; font-size: 1.4em; }
        .maladie-section {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
        }
        .maladie-section h4 { margin: 0 0 10px 0; font-size: 1em; }
        .maladie-section ul { margin: 0; padding-left: 20px; }
        .section-symptomes { background: #e3f2fd; border-left: 4px solid #2196f3; }
        .section-absents { background: #fff3e0; border-left: 4px solid #ff9800; }
        .section-alertes { background: #ffebee; border-left: 4px solid #f44336; }
        .section-conseils { background: #e8f5e9; border-left: 4px solid #4caf50; }
        .section-niveau {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .niveau-vert { background: #d4edda; color: #155724; }
        .niveau-jaune { background: #fff3cd; color: #856404; }
        .niveau-orange { background: #ffe5d0; color: #8a4500; }
        .niveau-rouge { background: #f8d7da; color: #721c24; }
        
        .alerte-rouge {
            background: linear-gradient(135deg, #dc3545, #c0392b);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

<h1>üè• Triage P√©diatrique<br><small style="font-size:0.6em">Enfant 6-15 ans</small></h1>

<div class="disclaimer">
    <strong>‚ö†Ô∏è Cet outil ne remplace pas un avis m√©dical.</strong><br>
    En cas d'urgence vitale, appelez le <strong>15</strong> ou le <strong>112</strong>.
</div>

<div class="mode-switch">
    <button class="active" onclick="switchMode('triage')">üîç Triage</button>
    <button onclick="switchMode('reverse')">üìö R√©f√©rence</button>
</div>

<!-- MODE TRIAGE -->
<div id="mode-triage" class="active">

    <!-- √âTAT G√âN√âRAL -->
    <div class="category">
        <h2>üå°Ô∏è √âtat G√©n√©ral</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="fievre" onchange="toggleSub(this)"> Fi√®vre</label>
            <div class="sub-options" id="sub-fievre">
                <strong>Temp√©rature :</strong><br>
                <label><input type="radio" name="temp" value="38"> 38 - 38.5¬∞C</label>
                <label><input type="radio" name="temp" value="38.5"> 38.5 - 39¬∞C</label>
                <label><input type="radio" name="temp" value="39"> 39 - 40¬∞C</label>
                <label class="red-flag"><input type="radio" name="temp" value="40"> > 40¬∞C</label>
                <hr>
                <strong>Dur√©e :</strong><br>
                <label><input type="radio" name="fievre-duree" value="1-2j"> 1-2 jours</label>
                <label><input type="radio" name="fievre-duree" value="3-4j"> 3-4 jours</label>
                <label><input type="radio" name="fievre-duree" value="5j-plus"> ‚â• 5 jours</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="fatigue" onchange="toggleSub(this)"> Fatigue inhabituelle</label>
            <div class="sub-options" id="sub-fatigue">
                <label><input type="radio" name="fatigue-level" value="legere"> L√©g√®re</label>
                <label><input type="radio" name="fatigue-level" value="marquee"> Marqu√©e</label>
                <label class="red-flag"><input type="radio" name="fatigue-level" value="prostration"> Prostration</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="appetit"> Perte d'app√©tit</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="frissons"> Frissons / Sueurs</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="courbatures"> Courbatures intenses</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="douleur-yeux"> Douleur derri√®re les yeux</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="paleur" onchange="toggleSub(this)"> P√¢leur / Teint anormal</label>
            <div class="sub-options" id="sub-paleur">
                <label><input type="radio" name="paleur-type" value="pale"> P√¢le</label>
                <label><input type="radio" name="paleur-type" value="gris"> Teint gris</label>
                <label class="red-flag"><input type="radio" name="paleur-type" value="marbrures"> Marbrures</label>
            </div>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="douleurThorax"> Douleur thoracique</label>
        </div>
    </div>

    <!-- CONSTANTES VITALES -->
    <div class="category" style="border-left: 4px solid #17a2b8;">
        <h2>üìä Constantes vitales (si mesur√©es)</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="hasSpo2" onchange="toggleSub(this)"> SpO2 (saturation)</label>
            <div class="sub-options" id="sub-hasSpo2">
                <label><input type="radio" name="spo2-val" value="95"> ‚â• 95% (normale)</label>
                <label><input type="radio" name="spo2-val" value="92"> 92-94%</label>
                <label class="red-flag"><input type="radio" name="spo2-val" value="90"> < 92%</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="hasFc" onchange="toggleSub(this)"> Fr√©quence cardiaque</label>
            <div class="sub-options" id="sub-hasFc">
                <strong>√Çge :</strong><br>
                <label><input type="radio" name="fc-age" value="6-8"> 6-8 ans (N: 70-110)</label>
                <label><input type="radio" name="fc-age" value="9-12"> 9-12 ans (N: 65-105)</label>
                <label><input type="radio" name="fc-age" value="13-15"> 13-15 ans (N: 60-100)</label>
                <hr>
                <label>FC mesur√©e : <input type="number" id="fc-value" min="40" max="220" style="width:80px"> bpm</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="hasFr" onchange="toggleSub(this)"> Fr√©quence respiratoire</label>
            <div class="sub-options" id="sub-hasFr">
                <strong>√Çge :</strong><br>
                <label><input type="radio" name="fr-age" value="6-8"> 6-8 ans (N: 18-24)</label>
                <label><input type="radio" name="fr-age" value="9-12"> 9-12 ans (N: 16-22)</label>
                <label><input type="radio" name="fr-age" value="13-15"> 13-15 ans (N: 12-20)</label>
                <hr>
                <label>FR mesur√©e : <input type="number" id="fr-value" min="8" max="60" style="width:80px"> /min</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="hasTa" onchange="toggleSub(this)"> Tension art√©rielle</label>
            <div class="sub-options" id="sub-hasTa">
                <label>Systolique : <input type="number" id="ta-sys" min="60" max="200" style="width:80px"> mmHg</label>
                <label>Diastolique : <input type="number" id="ta-dia" min="30" max="120" style="width:80px"> mmHg</label>
                <p style="font-size:0.8em;color:#666;margin-top:5px">Normal 6-15 ans : 90-120 / 55-80</p>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="hasGlycemie" onchange="toggleSub(this)"> Glyc√©mie capillaire</label>
            <div class="sub-options" id="sub-hasGlycemie">
                <label>Valeur : <input type="number" id="glycemie-val" min="0.2" max="6" step="0.1" style="width:80px"> g/L</label>
                <p style="font-size:0.8em;color:#666;margin-top:5px">Normal : 0.7-1.1 g/L ‚Ä¢ Hypo < 0.6 ‚Ä¢ Hyper > 1.26</p>
            </div>
        </div>
    </div>

    <!-- ORL / RESPIRATOIRE -->
    <div class="category">
        <h2>ü´Å ORL / Respiratoire</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="toux" onchange="toggleSub(this)"> Toux</label>
            <div class="sub-options" id="sub-toux">
                <strong>Type :</strong><br>
                <label><input type="radio" name="toux-type" value="seche"> S√®che</label>
                <label><input type="radio" name="toux-type" value="grasse"> Grasse</label>
                <label><input type="radio" name="toux-type" value="aboyante"> Aboyante (rauque)</label>
                <label><input type="radio" name="toux-type" value="quinteuse"> Quinteuse</label>
                <label><input type="radio" name="toux-type" value="eternuements"> √âternuements</label>
                <hr>
                <strong>Dur√©e :</strong><br>
                <label><input type="radio" name="toux-duree" value="recent"> R√©cente (&lt; 1 semaine)</label>
                <label><input type="radio" name="toux-duree" value="prolongee"> Prolong√©e (1-3 sem)</label>
                <label><input type="radio" name="toux-duree" value="chronique"> Chronique (&gt; 3 sem)</label>
                <hr>
                <strong>Si quinteuse :</strong><br>
                <label><input type="checkbox" name="toux-quinte" value="chantCoq"> Reprise inspiratoire (chant du coq)</label>
                <label><input type="checkbox" name="toux-quinte" value="vomissement"> Vomissements apr√®s quinte</label>
                <label><input type="checkbox" name="toux-quinte" value="cyanose"> Cyanose pendant quinte</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="nez" onchange="toggleSub(this)"> Nez qui coule</label>
            <div class="sub-options" id="sub-nez">
                <label><input type="radio" name="nez-type" value="clair"> Clair</label>
                <label><input type="radio" name="nez-type" value="jaune"> Jaune/vert √©pais</label>
                <label><input type="radio" name="nez-type" value="sang"> Avec sang</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="gorge" onchange="toggleSub(this)"> Mal de gorge</label>
            <div class="sub-options" id="sub-gorge">
                <label><input type="radio" name="gorge-type" value="douleur"> Douleur simple</label>
                <label><input type="radio" name="gorge-type" value="avaler"> Difficult√© √† avaler</label>
                <label class="red-flag"><input type="radio" name="gorge-type" value="bave"> Bave / impossible d'avaler</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="voix"> Voix enrou√©e / √©teinte</label>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="respiration" onchange="toggleSub(this)"> Difficult√©s respiratoires</label>
            <div class="sub-options" id="sub-respiration">
                <label><input type="radio" name="respi-type" value="rapide"> Respiration rapide</label>
                <label><input type="radio" name="respi-type" value="sifflante"> Sifflements</label>
                <label class="red-flag"><input type="radio" name="respi-type" value="tirage"> Tirage (creuse sous c√¥tes)</label>
                <label class="red-flag"><input type="radio" name="respi-type" value="cyanose"> L√®vres bleues</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="oreille" onchange="toggleSub(this)"> Douleur d'oreille</label>
            <div class="sub-options" id="sub-oreille">
                <label><input type="checkbox" id="oreilleEcoul"> √âcoulement</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="anosmie"> Perte odorat / go√ªt</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="difficulteParler"> Difficult√© √† parler / voix faible</label>
        </div>
    </div>

    <!-- DIGESTIF -->
    <div class="category">
        <h2>ü§¢ Digestif</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="vomissements" onchange="toggleSub(this)"> Vomissements</label>
            <div class="sub-options" id="sub-vomissements">
                <strong>Type :</strong><br>
                <label><input type="radio" name="vomi-type" value="alimentaire"> Alimentaires</label>
                <label><input type="radio" name="vomi-type" value="bilieux"> Verd√¢tres (bilieux)</label>
                <label class="red-flag"><input type="radio" name="vomi-type" value="sang"> Avec sang</label>
                <hr>
                <strong>Fr√©quence :</strong><br>
                <label><input type="radio" name="vomi-freq" value="quelques"> Quelques √©pisodes</label>
                <label><input type="radio" name="vomi-freq" value="repetes"> R√©p√©t√©s</label>
                <label class="red-flag"><input type="radio" name="vomi-freq" value="incoercible"> Incoercibles</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="diarrhee" onchange="toggleSub(this)"> Diarrh√©e</label>
            <div class="sub-options" id="sub-diarrhee">
                <strong>Type :</strong><br>
                <label><input type="radio" name="diarrhee-type" value="liquide"> Liquide</label>
                <label><input type="radio" name="diarrhee-type" value="glaires"> Avec glaires</label>
                <label class="red-flag"><input type="radio" name="diarrhee-type" value="sang"> Avec sang</label>
                <hr>
                <strong>Couleur :</strong><br>
                <label><input type="radio" name="diarrhee-couleur" value="normale"> Normale</label>
                <label><input type="radio" name="diarrhee-couleur" value="pale"> P√¢le/d√©color√©e</label>
                <label class="red-flag"><input type="radio" name="diarrhee-couleur" value="sang"> Sanglante</label>
                <label class="red-flag"><input type="radio" name="diarrhee-couleur" value="noire"> Noire</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="nausees"> Naus√©es</label>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="douleurAbdo" onchange="toggleSub(this)"> Douleur abdominale</label>
            <div class="sub-options" id="sub-douleurAbdo">
                <strong>Localisation :</strong><br>
                <label><input type="radio" name="abdo-loc" value="diffuse"> Diffuse</label>
                <label><input type="radio" name="abdo-loc" value="periombilicale"> Autour nombril</label>
                <label><input type="radio" name="abdo-loc" value="fid"> Bas-ventre droit</label>
                <label><input type="radio" name="abdo-loc" value="epigastre"> Estomac</label>
                <hr>
                <label><input type="checkbox" name="abdo-carac" value="constante"> Douleur constante</label>
                <label><input type="checkbox" name="abdo-carac" value="crampes"> Crampes</label>
                <label><input type="checkbox" name="abdo-carac" value="migration"> Migration de la douleur</label>
                <label class="red-flag"><input type="checkbox" name="abdo-carac" value="defense"> Ventre dur (d√©fense)</label>
                <hr>
                <strong>Signes appendice :</strong><br>
                <label><input type="checkbox" name="abdo-append" value="blumberg"> Douleur au rel√¢chement</label>
                <label><input type="checkbox" name="abdo-append" value="psoitis"> Douleur extension jambe</label>
                <label><input type="checkbox" name="abdo-append" value="rovsing"> Douleur c√¥t√© oppos√©</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="constipation"> Constipation / Arr√™t des gaz</label>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="deshydratation" onchange="toggleSub(this)"> Signes de d√©shydratation</label>
            <div class="sub-options" id="sub-deshydratation">
                <label><input type="checkbox" name="desh" value="soif"> Soif intense</label>
                <label><input type="checkbox" name="desh" value="bouche"> Bouche s√®che</label>
                <label class="red-flag"><input type="checkbox" name="desh" value="pli"> Pli cutan√© persistant</label>
                <label class="red-flag"><input type="checkbox" name="desh" value="yeux"> Yeux creux</label>
                <label class="red-flag"><input type="checkbox" name="desh" value="pasurines"> Pas d'urines > 8h</label>
            </div>
        </div>
    </div>

    <!-- CUTAN√â -->
    <div class="category">
        <h2>üî¥ Cutan√©</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="eruption" onchange="toggleSub(this)"> √âruption cutan√©e</label>
            <div class="sub-options" id="sub-eruption">
                <strong>Type :</strong><br>
                <label><input type="radio" name="eruption-type" value="macules"> Taches rouges plates</label>
                <label><input type="radio" name="eruption-type" value="papules"> Boutons en relief</label>
                <label><input type="radio" name="eruption-type" value="vesicules"> V√©sicules (cloques)</label>
                <label><input type="radio" name="eruption-type" value="urticaire"> Plaques qui grattent</label>
                <label class="red-flag"><input type="radio" name="eruption-type" value="purpura"> Ne s'efface PAS √† la pression</label>
                <hr>
                <strong>Localisation :</strong><br>
                <label><input type="checkbox" name="eruption-loc" value="visage"> Visage</label>
                <label><input type="checkbox" name="eruption-loc" value="tronc"> Tronc</label>
                <label><input type="checkbox" name="eruption-loc" value="membres"> Membres</label>
                <label><input type="checkbox" name="eruption-loc" value="palmoplantaire"> Paumes/plantes</label>
                <hr>
                <label><input type="checkbox" id="eruptionGratte"> D√©mangeaisons</label>
                <hr>
                <strong>Texture :</strong><br>
                <label><input type="checkbox" name="eruption-texture" value="rugueuse"> Rugueuse (papier de verre)</label>
                <label><input type="checkbox" name="eruption-texture" value="desquamation"> Desquamation</label>
                <hr>
                <strong>√âvolution :</strong><br>
                <label><input type="radio" name="eruption-evolution" value="centrifuge"> Du centre vers ext√©rieur</label>
                <label><input type="radio" name="eruption-evolution" value="centripete"> De l'ext√©rieur vers centre</label>
                <label><input type="radio" name="eruption-evolution" value="simultanee"> Apparition simultan√©e</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="aphtes"> Aphtes / l√©sions buccales</label>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="oedeme" onchange="toggleSub(this)"> Gonflement (≈ìd√®me)</label>
            <div class="sub-options" id="sub-oedeme">
                <label><input type="radio" name="oedeme-loc" value="visage"> Visage</label>
                <label class="red-flag"><input type="radio" name="oedeme-loc" value="levres"> L√®vres/langue</label>
                <label><input type="radio" name="oedeme-loc" value="membres"> Membres</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="ictere"> Jaunisse (yeux/peau jaunes)</label>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="saignements" onchange="toggleSub(this)"> Saignements spontan√©s</label>
            <div class="sub-options" id="sub-saignements">
                <label><input type="checkbox" name="saign" value="nez"> Nez</label>
                <label><input type="checkbox" name="saign" value="gencives"> Gencives</label>
                <label><input type="checkbox" name="saign" value="ecchymoses"> Bleus spontan√©s</label>
            </div>
        </div>
    </div>

    <!-- NEUROLOGIQUE -->
    <div class="category">
        <h2>üß† Neurologique</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="cephalee" onchange="toggleSub(this)"> Maux de t√™te</label>
            <div class="sub-options" id="sub-cephalee">
                <label><input type="radio" name="cephalee-type" value="modere"> Mod√©r√©s</label>
                <label><input type="radio" name="cephalee-type" value="intense"> Intenses</label>
                <label class="red-flag"><input type="radio" name="cephalee-type" value="brutal"> Brutal et intense ("pire de ma vie")</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label class="red-flag"><input type="checkbox" id="raideurNuque"> Raideur de nuque</label>
        </div>
        <div class="symptom-item">
            <label class="red-flag"><input type="checkbox" id="convulsions"> Convulsions</label>
        </div>
        <div class="symptom-item">
            <label class="red-flag"><input type="checkbox" id="confusion"> Confusion / somnolence anormale</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="vertiges"> Vertiges</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="photophobie"> G√™ne √† la lumi√®re</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="visionTrouble"> Vision trouble / double</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="paupieresTombantes"> Paupi√®res tombantes</label>
        </div>
        <div class="symptom-item">
            <label class="red-flag"><input type="checkbox" id="faiblesseMusculaire"> Faiblesse musculaire</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="paresthesies"> Fourmillements / engourdissements</label>
        </div>
    </div>

    <!-- AUTRES -->
    <div class="category">
        <h2>üëÅÔ∏è Autres signes</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="ganglions" onchange="toggleSub(this)"> Ganglions</label>
            <div class="sub-options" id="sub-ganglions">
                <label><input type="radio" name="ganglions-loc" value="cou"> Cou</label>
                <label><input type="radio" name="ganglions-loc" value="aisselles"> Aisselles</label>
                <label><input type="radio" name="ganglions-loc" value="aines"> Aines</label>
                <label><input type="radio" name="ganglions-loc" value="multiples"> Plusieurs zones</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="yeux" onchange="toggleSub(this)"> Probl√®me aux yeux</label>
            <div class="sub-options" id="sub-yeux">
                <label><input type="checkbox" name="yeux-type" value="rouge"> Rouges</label>
                <label><input type="checkbox" name="yeux-type" value="colles"> Coll√©s / s√©cr√©tions</label>
                <label><input type="checkbox" name="yeux-type" value="larmoie"> Larmoiement</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="langue" onchange="toggleSub(this)"> Aspect de la langue</label>
            <div class="sub-options" id="sub-langue">
                <label><input type="radio" name="langue-type" value="saburrale"> Blanche/charg√©e</label>
                <label><input type="radio" name="langue-type" value="framboise"> Rouge vif "frambois√©e"</label>
                <label><input type="radio" name="langue-type" value="seche"> Tr√®s s√®che</label>
            </div>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="levresFissures"> L√®vres rouges, fissur√©es</label>
        </div>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="douleurArticulaire" onchange="toggleSub(this)"> Douleurs articulaires</label>
            <div class="sub-options" id="sub-douleurArticulaire">
                <label><input type="radio" name="artic-intensite" value="legere"> L√©g√®res</label>
                <label><input type="radio" name="artic-intensite" value="moderee"> Mod√©r√©es</label>
                <label><input type="radio" name="artic-intensite" value="intense"> Intenses</label>
            </div>
        </div>
    </div>

    <!-- URINAIRE -->
    <div class="category">
        <h2>üíß Urinaire</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="urinaire" onchange="toggleSub(this)"> Probl√®mes urinaires</label>
            <div class="sub-options" id="sub-urinaire">
                <label><input type="checkbox" name="urinaire-types" value="brulure"> Br√ªlures mictionnelles</label>
                <label><input type="checkbox" name="urinaire-types" value="frequent"> Envies fr√©quentes</label>
                <label><input type="checkbox" name="urinaire-types" value="urgence"> Urgences mictionnelles</label>
                <label class="red-flag"><input type="checkbox" name="urinaire-types" value="sang"> Sang dans urines</label>
            </div>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="urinesCouleur" onchange="toggleSub(this)"> Urines anormales</label>
            <div class="sub-options" id="sub-urinesCouleur">
                <label><input type="radio" name="urines-couleur" value="fonce"> Fonc√©es (th√©)</label>
                <label><input type="radio" name="urines-couleur" value="trouble"> Troubles</label>
                <label class="red-flag"><input type="radio" name="urines-couleur" value="sang"> Sanglantes</label>
            </div>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="douleurLombaire"> Douleur lombaire (dos)</label>
        </div>
    </div>

    <!-- OST√âO-ARTICULAIRE -->
    <div class="category">
        <h2>ü¶¥ Ost√©o-articulaire</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="douleurMembre" onchange="toggleSub(this)"> Douleur membre</label>
            <div class="sub-options" id="sub-douleurMembre">
                <label><input type="checkbox" name="membre-signes" value="gonfle"> Gonfl√©</label>
                <label><input type="checkbox" name="membre-signes" value="rouge"> Rouge/chaud</label>
                <label><input type="checkbox" name="membre-signes" value="boiterie"> Boiterie</label>
            </div>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="douleurEpaule"> Douleur √©paule</label>
        </div>
    </div>

    <!-- G√âNITAL GAR√áON -->
    <div class="category">
        <h2>ü©∫ G√©nital (gar√ßon)</h2>
        
        <div class="symptom-item">
            <label class="red-flag"><input type="checkbox" id="douleurTesticule" onchange="toggleSub(this)"> Douleur testiculaire</label>
            <div class="sub-options" id="sub-douleurTesticule">
                <strong>D√©but :</strong><br>
                <label class="red-flag"><input type="radio" name="testicule-debut" value="brutal"> Brutal</label>
                <label><input type="radio" name="testicule-debut" value="progressif"> Progressif</label>
                <hr>
                <label><input type="checkbox" name="testicule-signes" value="gonfle"> Gonfl√©</label>
                <label><input type="checkbox" name="testicule-signes" value="haut"> Remont√©</label>
                <label><input type="checkbox" name="testicule-signes" value="rouge"> Rouge</label>
            </div>
        </div>
    </div>

    <!-- GYN√âCO -->
    <div class="category">
        <h2>‚ôÄÔ∏è Gyn√©cologique</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="douleurPelvienne" onchange="toggleSub(this)"> Douleur pelvienne</label>
            <div class="sub-options" id="sub-douleurPelvienne">
                <strong>D√©but :</strong><br>
                <label class="red-flag"><input type="radio" name="pelvien-debut" value="brutal"> Brutal</label>
                <label><input type="radio" name="pelvien-debut" value="progressif"> Progressif</label>
            </div>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="metrorragies"> Saignements vaginaux anormaux</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="retardRegles"> Retard de r√®gles</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="grossessePossible"> Grossesse possible</label>
        </div>
    </div>

    <!-- CONTEXTE -->
    <div class="category" style="border-left: 4px solid #20c997;">
        <h2>üåç Contexte / Terrain</h2>
        
        <div class="symptom-item">
            <label><input type="checkbox" id="repasSuspect"> Repas suspect < 48h</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="conserveMaison"> Conserve maison</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="collectivite"> Cas group√©s (√©cole, famille)</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="baignade"> Baignade rivi√®re r√©cente</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="drepanocytose"> Dr√©panocytose connue</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="immunodepression"> Immunod√©prim√©</label>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="zonePalu" onchange="toggleSub(this)"> S√©jour zone impalud√©e</label>
            <div class="sub-options" id="sub-zonePalu">
                <label><input type="radio" name="palu-zone" value="afrique"> Afrique</label>
                <label><input type="radio" name="palu-zone" value="asie"> Asie SE</label>
                <label><input type="radio" name="palu-zone" value="amazonie"> Amazonie</label>
            </div>
        </div>
        <div class="symptom-item">
            <label><input type="checkbox" id="vaccins" onchange="toggleSub(this)"> Statut vaccinal</label>
            <div class="sub-options" id="sub-vaccins">
                <label><input type="radio" name="vaccin-statut" value="ajour"> √Ä jour</label>
                <label><input type="radio" name="vaccin-statut" value="incomplet"> Incomplet</label>
                <label><input type="radio" name="vaccin-statut" value="inconnu"> Inconnu</label>
            </div>
        </div>
    </div>

    <button id="analyser" onclick="analyser()">üîç ANALYSER</button>
    <button id="reset" onclick="resetForm()">‚Ü∫ R√©initialiser</button>
    
    <div id="resultat"></div>
</div>

<!-- MODE R√âF√âRENCE -->
<div id="mode-reverse">
    <select class="maladie-select" id="maladie-select" onchange="afficherMaladie()">
        <option value="">üìö Choisissez une pathologie</option>
    </select>
    <div id="maladie-detail"></div>
</div>




<script>



// ============================================
// MALADIES DB - R√âF√âRENTIEL BIJECTIF COMPLET
// 68 maladies avec mapping HTML
// ============================================

const maladiesDB = {

    // ============================================
    // ORL / RESPIRATOIRE
    // ============================================

    rhinopharyngite: {
        nom: "Rhinopharyngite (rhume)",
        description: "Infection virale b√©nigne des voies respiratoires sup√©rieures. Tr√®s fr√©quente, gu√©rit spontan√©ment en 7-10 jours.",
        niveau: "vert",
        criteres: [
            { texte: "Nez qui coule", champ: "nez", op: "==", val: true },
            { texte: "√âternuements", champ: "touxType", op: "==", val: "eternuements" },
            { texte: "Toux l√©g√®re", champ: "toux", op: "==", val: true },
            { texte: "Fi√®vre mod√©r√©e (< 38.5¬∞C)", champ: "temp", op: "<", val: 38.5 },
            { texte: "Mal de gorge l√©ger", champ: "gorge", op: "==", val: true },
            { texte: "Mal de gorge l√©ger", champ: "gorgeType", op: "==", val: "douleur" },
            { texte: "L√©g√®re fatigue", champ: "fatigue", op: "==", val: true },
            { texte: "L√©g√®re fatigue", champ: "fatigueLevel", op: "==", val: "legere" }
        ],
        exclusions: [
            { texte: "Fi√®vre √©lev√©e (> 39¬∞C)", champ: "temp", op: ">=", val: 39 },
            { texte: "Difficult√©s respiratoires", champ: "respiration", op: "==", val: true },
            { texte: "Raideur de nuque", champ: "raideurNuque", op: "==", val: true },
            { texte: "Prostration", champ: "fatigueLevel", op: "==", val: "prostration" }
        ],
        urgence: null,
        alertes: [
            "Fi√®vre > 38.5¬∞C persistant plus de 48-72h",
            "Douleur d'oreille (otite secondaire)",
            "Difficult√©s respiratoires",
            "Refus de boire"
        ],
        conseils: [
            "Hydratation r√©guli√®re",
            "Lavage de nez au s√©rum physiologique",
            "Repos",
            "Parac√©tamol si fi√®vre ou inconfort"
        ],
        nonFaire: [
            "Antibiotiques (inefficaces contre les virus)"
        ]
    },

    angine: {
        nom: "Angine",
        description: "Infection des amygdales, virale (70-80%) ou bact√©rienne (streptocoque). Le test rapide (TROD) en pharmacie permet de diff√©rencier.",
        niveau: "jaune",
        criteres: [
            { texte: "Mal de gorge intense", champ: "gorge", op: "==", val: true },
            { texte: "Difficult√© √† avaler", champ: "gorgeType", op: "==", val: "avaler" },
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Fi√®vre (38-39¬∞C)", champ: "temp", op: ">=", val: 38 },
            { texte: "Ganglions du cou", champ: "ganglions", op: "==", val: true },
            { texte: "Ganglions du cou", champ: "ganglionsLoc", op: "==", val: "cou" },
            { texte: "Perte d'app√©tit", champ: "appetit", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Toux", champ: "toux", op: "==", val: true },
            { texte: "Nez qui coule", champ: "nez", op: "==", val: true },
            { texte: "Impossibilit√© d'avaler / bave", champ: "gorgeType", op: "==", val: "bave" }
        ],
        urgence: {
            condition: (data) => data.gorgeType === 'bave' && data.fievre,
            message: "Impossibilit√© de d√©glutir / bave - SUSPICION √âPIGLOTTITE - URGENCE"
        },
        alertes: [
            "Impossibilit√© de d√©glutir / bave ‚Üí √©piglottite = URGENCE",
            "Difficult√©s respiratoires",
            "Gonflement du cou important",
            "Fi√®vre persistante malgr√© traitement"
        ],
        conseils: [
            "Test rapide streptocoque (TROD) en pharmacie",
            "Si TROD positif ‚Üí consultation pour antibiotiques",
            "Parac√©tamol pour la douleur et fi√®vre",
            "Alimentation froide/ti√®de (moins douloureux)"
        ],
        nonFaire: [
            "Antibiotiques sans test positif"
        ]
    },

    otite: {
        nom: "Otite moyenne aigu√´",
        description: "Infection de l'oreille moyenne, tr√®s fr√©quente chez l'enfant. Souvent complication d'un rhume.",
        niveau: "jaune",
        criteres: [
            { texte: "Douleur d'oreille", champ: "oreille", op: "==", val: true },
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "√âcoulement oreille", champ: "oreilleEcoul", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Raideur de nuque", champ: "raideurNuque", op: "==", val: true },
            { texte: "√âruption cutan√©e", champ: "eruption", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.oreille && data.raideurNuque,
            message: "Otite + raideur nuque - √âLIMINER MASTO√èDITE/M√âNINGITE"
        },
        alertes: [
            "Gonflement/rougeur derri√®re l'oreille (masto√Ødite)",
            "Fi√®vre tr√®s √©lev√©e persistante",
            "Troubles de l'√©quilibre importants",
            "Paralysie du visage"
        ],
        conseils: [
            "Consultation m√©dicale recommand√©e",
            "Parac√©tamol pour la douleur",
            "Position semi-assise pour dormir",
            "Ne pas mettre d'eau dans l'oreille"
        ],
        nonFaire: [
            "Mettre des gouttes sans avis m√©dical (si tympan perfor√©)"
        ]
    },

    laryngite: {
        nom: "Laryngite",
        description: "Inflammation du larynx avec ≈ìd√®me. Toux caract√©ristique 'aboyante'. Souvent nocturne.",
        niveau: "orange",
        criteres: [
            { texte: "Toux aboyante", champ: "touxType", op: "==", val: "aboyante" },
            { texte: "Voix enrou√©e/√©teinte", champ: "voix", op: "==", val: true },
            { texte: "Difficult√©s respiratoires", champ: "respiration", op: "==", val: true },
            { texte: "Fi√®vre mod√©r√©e", champ: "fievre", op: "==", val: true },
            { texte: "Rhume pr√©alable", champ: "nez", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Bave / impossibilit√© d'avaler", champ: "gorgeType", op: "==", val: "bave" },
            { texte: "Fi√®vre tr√®s √©lev√©e", champ: "temp", op: ">=", val: 39.5 }
        ],
        urgence: {
            condition: (data) => data.touxType === 'aboyante' && (data.respiType === 'tirage' || data.respiType === 'cyanose'),
            message: "Laryngite s√©v√®re avec tirage/cyanose - URGENCE RESPIRATOIRE"
        },
        alertes: [
            "Difficult√©s respiratoires marqu√©es",
            "Tirage (creuse sous les c√¥tes)",
            "Cyanose (l√®vres bleues)",
            "Enfant qui bave, ne peut pas avaler ‚Üí URGENCE (√©piglottite)",
            "Agitation ou prostration"
        ],
        conseils: [
            "Calmer l'enfant (l'agitation aggrave)",
            "Air frais (ouvrir fen√™tre, sortir quelques minutes)",
            "Air humide (salle de bain avec eau chaude)",
            "Position assise ou semi-assise",
            "Consulter si difficult√©s respiratoires"
        ],
        nonFaire: [
            "Allonger l'enfant √† plat",
            "Paniquer (√ßa aggrave)"
        ]
    },

    bronchite: {
        nom: "Bronchite",
        description: "Inflammation des bronches, le plus souvent virale. Gu√©rit spontan√©ment en 2-3 semaines.",
        niveau: "jaune",
        criteres: [
            { texte: "Toux grasse", champ: "touxType", op: "==", val: "grasse" },
            { texte: "Fi√®vre mod√©r√©e", champ: "fievre", op: "==", val: true },
            { texte: "Fatigue", champ: "fatigue", op: "==", val: true },
            { texte: "Sifflements respiratoires", champ: "respiType", op: "==", val: "sifflante" }
        ],
        exclusions: [
            { texte: "Fi√®vre tr√®s √©lev√©e persistante", champ: "temp", op: ">=", val: 39 },
            { texte: "Difficult√©s respiratoires marqu√©es", champ: "respiType", op: "==", val: "tirage" }
        ],
        urgence: null,
        alertes: [
            "Fi√®vre > 39¬∞C persistant > 48h",
            "Difficult√©s respiratoires",
            "Douleur thoracique au repos",
            "Crachats sanglants"
        ],
        conseils: [
            "Hydratation +++",
            "Repos",
            "Parac√©tamol si fi√®vre",
            "Humidifier l'air ambiant"
        ],
        nonFaire: [
            "Antibiotiques (inefficaces si viral)",
            "Antitussifs si toux grasse (la toux √©vacue les s√©cr√©tions)"
        ]
    },

    pneumonie: {
        nom: "Pneumonie",
        description: "Infection du poumon, bact√©rienne ou virale. N√©cessite une √©valuation m√©dicale et souvent des antibiotiques.",
        niveau: "orange",
        criteres: [
            { texte: "Fi√®vre √©lev√©e (> 39¬∞C)", champ: "temp", op: ">=", val: 39 },
            { texte: "Toux", champ: "toux", op: "==", val: true },
            { texte: "Respiration rapide", champ: "respiType", op: "==", val: "rapide" },
            { texte: "Difficult√©s respiratoires", champ: "respiration", op: "==", val: true },
            { texte: "Fatigue marqu√©e", champ: "fatigueLevel", op: "in", val: ["marquee", "prostration"] },
            { texte: "Frissons", champ: "frissons", op: "==", val: true },
            { texte: "Douleur thoracique", champ: "douleurThorax", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.temp >= 40 && (data.respiType === 'tirage' || data.respiType === 'cyanose'),
            message: "Pneumonie s√©v√®re - Hospitalisation urgente"
        },
        alertes: [
            "Difficult√©s respiratoires importantes",
            "Cyanose (l√®vres/ongles bleus)",
            "SpO2 < 94%",
            "Prostration",
            "Refus de boire"
        ],
        conseils: [
            "Consultation m√©dicale n√©cessaire",
            "Radio pulmonaire souvent indiqu√©e",
            "Antibiotiques si bact√©rienne",
            "Surveillance √©troite"
        ],
        nonFaire: []
    },

    grippe: {
        nom: "Grippe (Influenza)",
        description: "Infection virale saisonni√®re. D√©but brutal avec fi√®vre √©lev√©e et courbatures intenses.",
        niveau: "jaune",
        criteres: [
            { texte: "Fi√®vre √©lev√©e brutale (> 39¬∞C)", champ: "temp", op: ">=", val: 39 },
            { texte: "Frissons intenses", champ: "frissons", op: "==", val: true },
            { texte: "Courbatures intenses", champ: "courbatures", op: "==", val: true },
            { texte: "Maux de t√™te", champ: "cephalee", op: "==", val: true },
            { texte: "Fatigue intense", champ: "fatigueLevel", op: "in", val: ["marquee", "prostration"] },
            { texte: "Toux s√®che", champ: "touxType", op: "==", val: "seche" },
            { texte: "Mal de gorge", champ: "gorge", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Douleur r√©tro-orbitaire", champ: "douleurYeux", op: "==", val: true },
            { texte: "√âruption cutan√©e", champ: "eruption", op: "==", val: true }
        ],
        urgence: null,
        alertes: [
            "Difficult√©s respiratoires",
            "Douleur thoracique",
            "Confusion",
            "Fi√®vre persistante > 5 jours"
        ],
        conseils: [
            "Repos au lit",
            "Hydratation abondante",
            "Parac√©tamol pour fi√®vre et douleurs",
            "Isolement pour √©viter contagion"
        ],
        nonFaire: [
            "Aspirine chez l'enfant (syndrome de Reye)"
        ]
    },

    covid: {
        nom: "COVID-19",
        description: "Infection respiratoire par SARS-CoV-2. Formes g√©n√©ralement b√©nignes chez l'enfant mais surveillance n√©cessaire.",
        niveau: "jaune",
        criteres: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Toux", champ: "toux", op: "==", val: true },
            { texte: "Fatigue", champ: "fatigue", op: "==", val: true },
            { texte: "Perte d'odorat/go√ªt", champ: "anosmie", op: "==", val: true },
            { texte: "Maux de t√™te", champ: "cephalee", op: "==", val: true },
            { texte: "Courbatures", champ: "courbatures", op: "==", val: true },
            { texte: "Mal de gorge", champ: "gorge", op: "==", val: true },
            { texte: "Diarrh√©e", champ: "diarrhee", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Douleur r√©tro-orbitaire", champ: "douleurYeux", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.respiration && data.spo2Val === '90',
            message: "COVID avec d√©saturation - Hospitalisation"
        },
        alertes: [
            "Difficult√©s respiratoires",
            "Douleur thoracique",
            "Confusion",
            "√âruption cutan√©e + fi√®vre persistante (MIS-C)"
        ],
        conseils: [
            "Test de d√©pistage",
            "Isolement",
            "Repos et hydratation",
            "Parac√©tamol si fi√®vre"
        ],
        nonFaire: []
    },

    coqueluche: {
        nom: "Coqueluche",
        description: "Infection bact√©rienne respiratoire tr√®s contagieuse. Toux quinteuse caract√©ristique pendant plusieurs semaines.",
        niveau: "orange",
        criteres: [
            { texte: "Toux en quintes", champ: "touxType", op: "==", val: "quinteuse" },
            { texte: "Chant du coq", champ: "touxQuinte", op: "contains", val: "chant" },
            { texte: "Vomissements d√©clench√©s par toux", champ: "touxQuinte", op: "contains", val: "vomit" },
            { texte: "Toux > 2 semaines", champ: "touxDuree", op: "==", val: "plus2sem" },
            { texte: "Vaccins incomplets", champ: "vaccinStatut", op: "in", val: ["incomplet", "inconnu"] }
        ],
        exclusions: [
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 38.5 }
        ],
        urgence: {
            condition: (data) => data.touxQuinte && data.touxQuinte.includes('cyanose'),
            message: "Cyanose pendant quintes - COQUELUCHE MALIGNE - URGENCE"
        },
        alertes: [
            "Cyanose (bleu) pendant les quintes",
            "Apn√©es",
            "Difficult√©s alimentaires",
            "√âpuisement"
        ],
        conseils: [
            "Consultation pour confirmation (PCR)",
            "Antibiotiques (azithromycine) r√©duisent la contagiosit√©",
            "√âviction scolaire 5 jours apr√®s d√©but antibiotiques",
            "V√©rifier vaccination entourage"
        ],
        nonFaire: [
            "Antitussifs (inefficaces)",
            "Envoyer √† l'√©cole sans traitement"
        ]
    },

    // ============================================
    // DIGESTIF
    // ============================================

    gastro: {
        nom: "Gastro-ent√©rite",
        description: "Infection digestive virale ou bact√©rienne. Tr√®s contagieuse. Gu√©rit en 2-5 jours.",
        niveau: "jaune",
        criteres: [
            { texte: "Vomissements", champ: "vomissements", op: "==", val: true },
            { texte: "Diarrh√©e liquide", champ: "diarrhee", op: "==", val: true },
            { texte: "Diarrh√©e liquide", champ: "diarrheeType", op: "==", val: "liquide" },
            { texte: "Douleurs abdominales crampes", champ: "douleurAbdo", op: "==", val: true },
            { texte: "Douleurs abdominales crampes", champ: "abdoCarac", op: "contains", val: "crampes" },
            { texte: "Fi√®vre mod√©r√©e", champ: "fievre", op: "==", val: true },
            { texte: "Naus√©es", champ: "nausees", op: "==", val: true },
            { texte: "Perte d'app√©tit", champ: "appetit", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Sang dans selles", champ: "diarrheeCouleur", op: "in", val: ["sang", "noire"] },
            { texte: "Douleur localis√©e en bas √† droite", champ: "abdoLoc", op: "==", val: "fid" }
        ],
        urgence: {
            condition: (data) => data.deshydratation && data.deshSignes && data.deshSignes.length >= 3,
            message: "D√©shydratation s√©v√®re - R√©hydratation urgente"
        },
        alertes: [
            "Signes de d√©shydratation (pli cutan√©, yeux creux, pas d'urines > 8h)",
            "Vomissements incoercibles (ne garde rien)",
            "Sang dans les selles ou vomissements",
            "Douleur abdominale qui se localise",
            "Fi√®vre √©lev√©e persistante"
        ],
        conseils: [
            "R√©hydratation +++ (SRO en pharmacie)",
            "Petites quantit√©s fr√©quentes",
            "Reprendre alimentation progressive",
            "Hygi√®ne des mains stricte"
        ],
        nonFaire: [
            "Boissons sucr√©es type soda (aggrave diarrh√©e)",
            "Anti-diarrh√©iques sans avis m√©dical"
        ]
    },

    tiac: {
        nom: "Toxi-infection alimentaire (TIAC)",
        description: "Intoxication par aliments contamin√©s. D√©but 6-48h apr√®s ingestion.",
        niveau: "orange",
        criteres: [
            { texte: "Vomissements", champ: "vomissements", op: "==", val: true },
            { texte: "Diarrh√©e", champ: "diarrhee", op: "==", val: true },
            { texte: "Douleurs abdominales intenses", champ: "douleurAbdo", op: "==", val: true },
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Repas suspect", champ: "repasSuspect", op: "==", val: true },
            { texte: "Cas group√©s", champ: "collectivite", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Sympt√¥mes neurologiques", champ: "visionTrouble", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.visionTrouble && data.faiblesseMusculaire,
            message: "Signes neurologiques - SUSPICION BOTULISME - URGENCE"
        },
        alertes: [
            "D√©shydratation s√©v√®re",
            "Sang abondant dans les selles",
            "Fi√®vre tr√®s √©lev√©e",
            "Signes neurologiques (vision trouble, faiblesse) ‚Üí botulisme"
        ],
        conseils: [
            "R√©hydratation prioritaire",
            "Conserver les restes alimentaires suspects",
            "Consultation m√©dicale recommand√©e",
            "Signalement si cas group√©s"
        ],
        nonFaire: [
            "Anti-diarrh√©iques (retiennent les toxines)"
        ]
    },

    appendicite: {
        nom: "Appendicite",
        description: "Inflammation de l'appendice. Urgence chirurgicale. Le diagnostic pr√©coce est crucial.",
        niveau: "orange",
        criteres: [
            { texte: "Douleur FID", champ: "abdoLoc", op: "==", val: "fid" },
            { texte: "Migration douleur", champ: "abdoCarac", op: "contains", val: "migration" },
            { texte: "Douleur qui augmente", champ: "abdoCarac", op: "contains", val: "augmente" },
            { texte: "Vomissements APR√àS la douleur", champ: "abdoAppend", op: "contains", val: "vomi-apres" },
            { texte: "Perte d'app√©tit", champ: "abdoAppend", op: "contains", val: "anorexie" },
            { texte: "Fi√®vre mod√©r√©e", champ: "fievre", op: "==", val: true },
            { texte: "Marche courb√©", champ: "abdoAppend", op: "contains", val: "marche" },
            { texte: "Position chien de fusil", champ: "abdoAppend", op: "contains", val: "couche" }
        ],
        exclusions: [
            { texte: "Diarrh√©e importante", champ: "diarrheeType", op: "==", val: "explosive" }
        ],
        urgence: {
            condition: (data) => data.abdoLoc === 'fid' && data.abdoCarac && data.abdoCarac.includes('defense'),
            message: "Appendicite avec d√©fense - Chirurgie urgente"
        },
        alertes: [
            "Ventre dur (d√©fense abdominale)",
            "Douleur au rel√¢chement (rebond)",
            "Fi√®vre qui augmente",
            "Aggravation rapide"
        ],
        conseils: [
            "Consultation urgente n√©cessaire",
            "NE PAS faire manger ni boire",
            "NE PAS donner de laxatifs",
            "NE PAS appliquer de chaleur sur le ventre"
        ],
        nonFaire: [
            "Attendre en cas de doute",
            "Donner √† manger ou √† boire",
            "Laxatifs",
            "Chaleur sur le ventre"
        ]
    },

    occlusion: {
        nom: "Occlusion intestinale",
        description: "Arr√™t du transit intestinal. Urgence chirurgicale.",
        niveau: "rouge",
        criteres: [
            { texte: "Douleurs abdominales intenses", champ: "douleurAbdo", op: "==", val: true },
            { texte: "Vomissements bilieux", champ: "vomiType", op: "==", val: "bilieux" },
            { texte: "Vomissements r√©p√©t√©s", champ: "vomiFreq", op: "in", val: ["repete", "incoercible"] },
            { texte: "Arr√™t selles et gaz", champ: "constipation", op: "==", val: true },
            { texte: "Ventre ballonn√©", champ: "abdoCarac", op: "contains", val: "ballonne" }
        ],
        exclusions: [
            { texte: "Diarrh√©e", champ: "diarrhee", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.vomiType === 'bilieux' && data.constipation,
            message: "Vomissements bilieux + arr√™t transit - OCCLUSION - Chirurgie urgente"
        },
        alertes: [
            "Tous les sympt√¥mes ci-dessus constituent une urgence"
        ],
        conseils: [
            "Urgences imm√©diatement",
            "NE RIEN donner √† manger ni √† boire"
        ],
        nonFaire: [
            "Attendre",
            "Alimentation ou boisson",
            "Laxatifs"
        ]
    },

    hepatite: {
        nom: "H√©patite virale",
        description: "Infection du foie. Peut √™tre asymptomatique ou s√©v√®re.",
        niveau: "orange",
        criteres: [
            { texte: "Jaunisse (ict√®re)", champ: "ictere", op: "==", val: true },
            { texte: "Fatigue intense", champ: "fatigueLevel", op: "in", val: ["marquee", "prostration"] },
            { texte: "Perte d'app√©tit", champ: "appetit", op: "==", val: true },
            { texte: "Naus√©es", champ: "nausees", op: "==", val: true },
            { texte: "Douleur sous c√¥tes droites", champ: "abdoLoc", op: "==", val: "hcd" },
            { texte: "Urines fonc√©es", champ: "urinesCouleur", op: "==", val: "fonce" },
            { texte: "Selles d√©color√©es", champ: "diarrheeCouleur", op: "==", val: "pale" }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.ictere && data.confusion,
            message: "Ict√®re + confusion - H√âPATITE FULMINANTE - Urgence vitale"
        },
        alertes: [
            "Confusion (enc√©phalopathie h√©patique)",
            "Saignements spontan√©s",
            "Jaunisse intense d'aggravation rapide"
        ],
        conseils: [
            "Consultation m√©dicale n√©cessaire",
            "Repos strict",
            "Hygi√®ne rigoureuse (h√©patite A tr√®s contagieuse)",
            "√âviter m√©dicaments h√©patotoxiques"
        ],
        nonFaire: [
            "Parac√©tamol √† fortes doses (h√©patotoxique)",
            "Alcool"
        ]
    },

    invagination: {
        nom: "Invagination intestinale aigu√´",
        description: "P√©n√©tration d'un segment intestinal dans le segment d'aval. Urgence chirurgicale ou r√©duction par lavement.",
        niveau: "orange",
        criteres: [
            { texte: "Crises douloureuses paroxystiques", champ: "abdoCarac", op: "contains", val: "crampes" },
            { texte: "P√¢leur pendant crises", champ: "paleur", op: "==", val: true },
            { texte: "Vomissements", champ: "vomissements", op: "==", val: true },
            { texte: "Refus alimentaire", champ: "appetit", op: "==", val: true },
            { texte: "Selles gel√©e de groseille", champ: "diarrheeCouleur", op: "==", val: "sang" }
        ],
        exclusions: [
            { texte: "Fi√®vre au d√©but", champ: "fievre", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.abdoCarac && data.abdoCarac.includes('crampes') && data.diarrheeCouleur === 'sang',
            message: "Crises + rectorragies - INVAGINATION - √âchographie urgente"
        },
        alertes: [
            "Rectorragies = invagination √©volu√©e",
            "Signes de choc = n√©crose intestinale"
        ],
        conseils: [
            "√âchographie abdominale urgente (image en cocarde)",
            "Lavement th√©rapeutique si < 24h et pas de complication",
            "Chirurgie si √©chec ou complication"
        ],
        nonFaire: [
            "Attendre les rectorragies pour √©voquer le diagnostic"
        ]
    },

    volvulus: {
        nom: "Volvulus",
        description: "Torsion d'une anse intestinale. Occlusion + isch√©mie. Urgence chirurgicale absolue.",
        niveau: "rouge",
        criteres: [
            { texte: "Douleur abdominale brutale intense", champ: "douleurAbdo", op: "==", val: true },
            { texte: "Vomissements bilieux", champ: "vomiType", op: "==", val: "bilieux" },
            { texte: "Arr√™t des mati√®res/gaz", champ: "constipation", op: "==", val: true },
            { texte: "Ballonnement", champ: "abdoCarac", op: "contains", val: "ballonne" },
            { texte: "D√©fense", champ: "abdoCarac", op: "contains", val: "defense" }
        ],
        exclusions: [
            { texte: "Diarrh√©e", champ: "diarrhee", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.vomiType === 'bilieux' && data.constipation,
            message: "Vomissements bilieux + arr√™t transit - VOLVULUS - Chirurgie imm√©diate"
        },
        alertes: [
            "Tous ces signes = chirurgie urgente",
            "Signes de choc = isch√©mie avanc√©e"
        ],
        conseils: [
            "Chirurgie urgente",
            "Ne rien donner per os"
        ],
        nonFaire: [
            "Attendre",
            "Alimentation"
        ]
    },

    ischemie_mesenterique: {
        nom: "Isch√©mie m√©sent√©rique",
        description: "N√©crose intestinale par occlusion vasculaire. Rare en p√©diatrie. Douleur disproportionn√©e vs examen.",
        niveau: "rouge",
        criteres: [
            { texte: "Douleur abdominale INTENSE", champ: "douleurAbdo", op: "==", val: true },
            { texte: "Douleur constante", champ: "abdoCarac", op: "contains", val: "constante" },
            { texte: "Prostration", champ: "fatigueLevel", op: "==", val: "prostration" },
            { texte: "Rectorragies", champ: "diarrheeCouleur", op: "in", val: ["sang", "noire"] },
            { texte: "Vomissements", champ: "vomissements", op: "==", val: true }
        ],
        exclusions: [
            { texte: "D√©fense (au d√©but)", champ: "abdoCarac", op: "contains", val: "defense" }
        ],
        urgence: {
            condition: (data) => data.douleurAbdo && data.fatigueLevel === 'prostration' && !data.fievre,
            message: "Douleur disproportionn√©e - ISCH√âMIE M√âSENT√âRIQUE - Chirurgie urgente"
        },
        alertes: [
            "Douleur disproportionn√©e = signe majeur",
            "Acidose lactique"
        ],
        conseils: [
            "Angioscanner m√©sent√©rique",
            "Chirurgie / radiologie interventionnelle",
            "R√©animation"
        ],
        nonFaire: [
            "Se fier au ventre souple pour √©liminer le diagnostic"
        ]
    },

    pancreatite_aigue: {
        nom: "Pancr√©atite aigu√´",
        description: "Inflammation aigu√´ du pancr√©as. Formes s√©v√®res avec n√©crose = urgence.",
        niveau: "orange",
        criteres: [
            { texte: "Douleur √©pigastrique intense", champ: "abdoLoc", op: "==", val: "estomac" },
            { texte: "Douleur constante", champ: "abdoCarac", op: "contains", val: "constante" },
            { texte: "Vomissements persistants", champ: "vomiFreq", op: "==", val: "incoercible" },
            { texte: "Position antalgique", champ: "abdoAppend", op: "contains", val: "couche" },
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Ict√®re possible", champ: "ictere", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.abdoLoc === 'estomac' && data.vomiFreq === 'incoercible' && data.confusion,
            message: "Pancr√©atite avec confusion - Forme grave - R√©animation"
        },
        alertes: [
            "D√©faillance d'organe (choc, IRA, SDRA)",
            "N√©crose pancr√©atique",
            "Surinfection"
        ],
        conseils: [
            "Lipase > 3N confirme le diagnostic",
            "Scanner si forme s√©v√®re",
            "Je√ªne strict",
            "R√©hydratation",
            "Antalgiques"
        ],
        nonFaire: [
            "Alimentation pr√©coce si forme s√©v√®re"
        ]
    },

    // ============================================
    // CUTAN√â / √âRUPTIF
    // ============================================

    varicelle: {
        nom: "Varicelle",
        description: "Infection virale tr√®s contagieuse. B√©nigne chez l'enfant immunocomp√©tent.",
        niveau: "vert",
        criteres: [
            { texte: "√âruption v√©siculeuse", champ: "eruptionType", op: "==", val: "vesicules" },
            { texte: "L√©sions d'√¢ges diff√©rents", champ: "eruption", op: "==", val: true },
            { texte: "D√©mangeaisons intenses", champ: "eruptionGratte", op: "==", val: true },
            { texte: "Localisation tronc", champ: "eruptionLoc", op: "contains", val: "tronc" },
            { texte: "Fi√®vre mod√©r√©e", champ: "fievre", op: "==", val: true },
            { texte: "Fatigue", champ: "fatigue", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Localisation mains/pieds pr√©dominante", champ: "eruptionLoc", op: "contains", val: "mains" },
            { texte: "Fi√®vre √©lev√©e persistante", champ: "temp", op: ">=", val: 39 }
        ],
        urgence: {
            condition: (data) => data.eruptionType === 'vesicules' && data.immunodepression,
            message: "Varicelle sur terrain immunod√©prim√© - Hospitalisation"
        },
        alertes: [
            "Surinfection des l√©sions (pus, rougeur √©tendue, fi√®vre)",
            "Difficult√©s respiratoires",
            "Troubles neurologiques",
            "L√©sions dans les yeux"
        ],
        conseils: [
            "√âviction scolaire jusqu'√† cro√ªtes (environ 7 jours)",
            "Antihistaminique pour les d√©mangeaisons",
            "Ongles courts et propres",
            "Bains courts √† l'eau ti√®de",
            "Parac√©tamol si fi√®vre"
        ],
        nonFaire: [
            "Aspirine (syndrome de Reye)",
            "Ibuprof√®ne (risque de complications cutan√©es)",
            "Gratter (cicatrices)"
        ]
    },

    pmb: {
        nom: "Syndrome pieds-mains-bouche",
        description: "Infection virale (Coxsackie). Tr√®s contagieuse. B√©nigne. Gu√©rit en 7-10 jours.",
        niveau: "vert",
        criteres: [
            { texte: "V√©sicules mains", champ: "eruptionLoc", op: "contains", val: "mains" },
            { texte: "V√©sicules pieds", champ: "eruptionLoc", op: "contains", val: "pieds" },
            { texte: "Aphtes bouche", champ: "aphtes", op: "==", val: true },
            { texte: "√âruption fesses", champ: "eruptionLoc", op: "contains", val: "fesses" },
            { texte: "Fi√®vre mod√©r√©e", champ: "fievre", op: "==", val: true },
            { texte: "Refus de manger", champ: "appetit", op: "==", val: true }
        ],
        exclusions: [
            { texte: "V√©sicules sur tronc", champ: "eruptionLoc", op: "contains", val: "tronc" }
        ],
        urgence: null,
        alertes: [
            "D√©shydratation (refus de boire)",
            "Fi√®vre √©lev√©e persistante",
            "Signes neurologiques (rare)"
        ],
        conseils: [
            "Alimentation froide et liquide",
            "√âviter aliments acides ou sal√©s",
            "Parac√©tamol",
            "√âviction de collectivit√© jusqu'√† gu√©rison des l√©sions"
        ],
        nonFaire: [
            "Forcer √† manger"
        ]
    },

    urticaire: {
        nom: "Urticaire / R√©action allergique",
        description: "R√©action cutan√©e allergique ou non. G√©n√©ralement b√©nigne mais surveiller signes de gravit√©.",
        niveau: "jaune",
        criteres: [
            { texte: "Plaques rouges en relief", champ: "eruptionType", op: "==", val: "urticaire" },
            { texte: "D√©mangeaisons intenses", champ: "eruptionGratte", op: "==", val: true },
            { texte: "Apparition rapide", champ: "eruption", op: "==", val: true },
            { texte: "Gonflement possible", champ: "oedeme", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Difficult√©s respiratoires", champ: "respiration", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.eruption && (data.respiration || data.oedemeLoc === 'levres'),
            message: "Urticaire + ≈ìd√®me/g√™ne respiratoire - ANAPHYLAXIE - Adr√©naline"
        },
        alertes: [
            "Gonflement des l√®vres/langue/gorge ‚Üí URGENCE",
            "Difficult√©s respiratoires ‚Üí URGENCE",
            "Malaise, chute de tension ‚Üí URGENCE"
        ],
        conseils: [
            "Antihistaminique",
            "Identifier l'allerg√®ne si possible",
            "Consultation si r√©cidive ou √©tendu"
        ],
        nonFaire: []
    },

    scarlatine: {
        nom: "Scarlatine",
        description: "Angine streptococcique avec √©ruption cutan√©e. N√©cessite antibiotiques.",
        niveau: "jaune",
        criteres: [
            { texte: "Angine avec fi√®vre √©lev√©e", champ: "gorge", op: "==", val: true },
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 38.5 },
            { texte: "√âruption granit√©", champ: "eruptionTexture", op: "contains", val: "granite" },
            { texte: "Langue frambois√©e", champ: "langueType", op: "==", val: "framboise" },
            { texte: "Ganglions", champ: "ganglions", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Toux", champ: "toux", op: "==", val: true },
            { texte: "√âruption v√©siculeuse", champ: "eruptionType", op: "==", val: "vesicules" }
        ],
        urgence: null,
        alertes: [
            "Douleurs articulaires (RAA)",
            "Urines fonc√©es / rares (glom√©rulon√©phrite)"
        ],
        conseils: [
            "Consultation m√©dicale n√©cessaire",
            "Antibiotiques indispensables (p√©nicilline/amoxicilline)",
            "√âviction scolaire 48h apr√®s d√©but antibiotiques"
        ],
        nonFaire: []
    },

    roseole: {
        nom: "Ros√©ole (Exanth√®me subit)",
        description: "Infection virale b√©nigne. Fi√®vre √©lev√©e 3-4 jours puis √©ruption √† la chute de la fi√®vre.",
        niveau: "vert",
        criteres: [
            { texte: "Fi√®vre √©lev√©e (39-40¬∞C) pendant 3-4 jours", champ: "temp", op: ">=", val: 39 },
            { texte: "√âtat g√©n√©ral conserv√© malgr√© fi√®vre", champ: "fatigueLevel", op: "!=", val: "prostration" },
            { texte: "√âruption APR√àS chute fi√®vre", champ: "eruptionEvolution", op: "==", val: "apres-fievre" },
            { texte: "√âruption tronc", champ: "eruptionLoc", op: "contains", val: "tronc" }
        ],
        exclusions: [
            { texte: "Toux", champ: "toux", op: "==", val: true },
            { texte: "√âruption pendant la fi√®vre", champ: "eruptionEvolution", op: "==", val: "avec-fievre" }
        ],
        urgence: null,
        alertes: [
            "Convulsions f√©briles (assez fr√©quentes avec cette infection)"
        ],
        conseils: [
            "Antipyr√©tiques pendant la phase f√©brile",
            "Pas de traitement sp√©cifique",
            "Rassurer : b√©nin, gu√©rison spontan√©e"
        ],
        nonFaire: []
    },

    rougeole: {
        nom: "Rougeole",
        description: "Infection virale tr√®s contagieuse. Complications possibles graves. Maladie √† d√©claration obligatoire.",
        niveau: "orange",
        criteres: [
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 38.5 },
            { texte: "Conjonctivite", champ: "yeuxTypes", op: "contains", val: "rouge" },
            { texte: "Rhinite", champ: "nez", op: "==", val: true },
            { texte: "Toux", champ: "toux", op: "==", val: true },
            { texte: "√âruption descendante", champ: "eruptionEvolution", op: "==", val: "descend" },
            { texte: "Vaccins incomplets", champ: "vaccinStatut", op: "in", val: ["incomplet", "inconnu"] }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.eruption && data.confusion,
            message: "Rougeole + troubles conscience - ENC√âPHALITE - Urgence"
        },
        alertes: [
            "Enc√©phalite (confusion, convulsions)",
            "Pneumonie",
            "Surinfection bact√©rienne"
        ],
        conseils: [
            "Isolement strict",
            "D√©claration obligatoire ARS",
            "V√©rifier vaccination entourage",
            "Vitamine A (OMS)"
        ],
        nonFaire: [
            "Envoyer en collectivit√©"
        ]
    },

    // ============================================
    // ARBOVIROSES (TROPICAL)
    // ============================================

    dengue: {
        nom: "Dengue",
        description: "Arbovirose transmise par moustique (Aedes). End√©mique aux Antilles. Surveillance J3-J7 cruciale.",
        niveau: "orange",
        criteres: [
            { texte: "Fi√®vre √©lev√©e brutale (> 39¬∞C)", champ: "temp", op: ">=", val: 39 },
            { texte: "Douleur r√©tro-orbitaire", champ: "douleurYeux", op: "==", val: true },
            { texte: "C√©phal√©es intenses", champ: "cephaleeType", op: "in", val: ["intense", "brutal"] },
            { texte: "Courbatures intenses", champ: "courbatures", op: "==", val: true },
            { texte: "Fatigue marqu√©e", champ: "fatigueLevel", op: "in", val: ["marquee", "prostration"] },
            { texte: "√âruption cutan√©e J2-J5", champ: "eruption", op: "==", val: true },
            { texte: "Naus√©es", champ: "nausees", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Toux importante", champ: "toux", op: "==", val: true },
            { texte: "Douleurs articulaires pr√©dominantes", champ: "articIntensite", op: "==", val: "intense" }
        ],
        urgence: {
            condition: (data) => data.saignements || (data.douleurAbdo && data.abdoLoc === 'estomac') || data.extremitesFroides,
            message: "Dengue avec signes d'alarme - Hospitalisation"
        },
        alertes: [
            "Douleur abdominale intense",
            "Vomissements persistants",
            "Saignements (gencives, nez, ecchymoses)",
            "Agitation ou l√©thargie",
            "Extr√©mit√©s froides",
            "Chute brutale de la fi√®vre + malaise ‚Üí dengue s√©v√®re"
        ],
        conseils: [
            "Parac√©tamol UNIQUEMENT",
            "Hydratation +++",
            "Repos",
            "Protection anti-moustiques (√©viter transmission)",
            "Surveillance √©troite J3-J7"
        ],
        nonFaire: [
            "Aspirine (risque h√©morragique)",
            "Ibuprof√®ne (risque h√©morragique)",
            "AINS"
        ]
    },

    chikungunya: {
        nom: "Chikungunya",
        description: "Arbovirose transmise par moustique. Douleurs articulaires intenses et invalidantes.",
        niveau: "jaune",
        criteres: [
            { texte: "Fi√®vre √©lev√©e brutale", champ: "temp", op: ">=", val: 38.5 },
            { texte: "Douleurs articulaires intenses", champ: "douleurArticulaire", op: "==", val: true },
            { texte: "Douleurs articulaires intenses", champ: "articIntensite", op: "==", val: "intense" },
            { texte: "Gonflements articulaires", champ: "membreSignes", op: "contains", val: "gonfle" },
            { texte: "√âruption cutan√©e", champ: "eruption", op: "==", val: true },
            { texte: "C√©phal√©es", champ: "cephalee", op: "==", val: true },
            { texte: "Courbatures", champ: "courbatures", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Douleur r√©tro-orbitaire marqu√©e", champ: "douleurYeux", op: "==", val: true }
        ],
        urgence: null,
        alertes: [
            "Signes neurologiques",
            "D√©shydratation",
            "Formes s√©v√®res chez le petit enfant"
        ],
        conseils: [
            "Parac√©tamol UNIQUEMENT",
            "Hydratation",
            "Repos",
            "Protection anti-moustiques"
        ],
        nonFaire: [
            "Aspirine",
            "Ibuprof√®ne",
            "AINS (√† √©viter initialement)"
        ]
    },

    leptospirose: {
        nom: "Leptospirose",
        description: "Infection bact√©rienne li√©e √† l'eau/boue contamin√©e par urines de rongeurs. Fr√©quente apr√®s baignade en rivi√®re.",
        niveau: "orange",
        criteres: [
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 39 },
            { texte: "C√©phal√©es intenses", champ: "cephaleeType", op: "==", val: "intense" },
            { texte: "Courbatures intenses (mollets++)", champ: "courbatures", op: "==", val: true },
            { texte: "Conjonctivite", champ: "yeuxTypes", op: "contains", val: "rouge" },
            { texte: "Jaunisse", champ: "ictere", op: "==", val: true },
            { texte: "Baignade rivi√®re/mare", champ: "baignade", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.ictere && data.deshSignes && data.deshSignes.includes('pasurines'),
            message: "Leptospirose ict√©ro-h√©morragique - Urgence vitale"
        },
        alertes: [
            "Jaunisse (atteinte h√©patique)",
            "Oligurie (peu d'urines ‚Üí atteinte r√©nale)",
            "Saignements",
            "Confusion"
        ],
        conseils: [
            "Consultation m√©dicale rapide",
            "Antibiotiques n√©cessaires",
            "Signaler la baignade au m√©decin"
        ],
        nonFaire: []
    },

    paludisme: {
        nom: "Paludisme (acc√®s palustre)",
        description: "Infection parasitaire (Plasmodium) transmise par moustique anoph√®le. Urgence diagnostique et th√©rapeutique.",
        niveau: "rouge",
        criteres: [
            { texte: "S√©jour zone impalud√©e < 2 mois", champ: "zonePalu", op: "==", val: true },
            { texte: "Fi√®vre avec frissons intenses", champ: "fievre", op: "==", val: true },
            { texte: "Frissons intenses", champ: "frissons", op: "==", val: true },
            { texte: "C√©phal√©es", champ: "cephalee", op: "==", val: true },
            { texte: "Courbatures", champ: "courbatures", op: "==", val: true },
            { texte: "Vomissements", champ: "vomissements", op: "==", val: true },
            { texte: "Diarrh√©e", champ: "diarrhee", op: "==", val: true }
        ],
        exclusions: [
            { texte: "√âruption cutan√©e", champ: "eruption", op: "==", val: true },
            { texte: "Toux importante", champ: "toux", op: "==", val: true },
            { texte: "Douleur r√©tro-orbitaire", champ: "douleurYeux", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.zonePalu && data.fievre && (data.confusion || data.convulsions || data.fatigueLevel === 'prostration'),
            message: "PALUDISME GRAVE - Art√©sunate IV - Urgence vitale"
        },
        alertes: [
            "Confusion / troubles de conscience ‚Üí PALUDISME GRAVE",
            "Convulsions ‚Üí PALUDISME GRAVE",
            "Prostration ‚Üí PALUDISME GRAVE",
            "Ict√®re",
            "Urines fonc√©es / rares",
            "Saignements"
        ],
        conseils: [
            "Frottis-goutte √©paisse EN URGENCE (r√©sultat < 2h)",
            "Hospitalisation si P. falciparum",
            "Art√©sunate IV si forme grave",
            "Toute fi√®vre au retour de zone d'end√©mie = paludisme jusqu'√† preuve du contraire"
        ],
        nonFaire: [
            "Attendre pour faire le diagnostic",
            "Traiter en ambulatoire sans certitude"
        ]
    },

    // ============================================
    // AUTRES INFECTIONS
    // ============================================

    mononucleose: {
        nom: "Mononucl√©ose infectieuse",
        description: "Infection virale (EBV). 'Maladie du baiser'. Fatigue prolong√©e fr√©quente. Rate fragile.",
        niveau: "jaune",
        criteres: [
            { texte: "Fatigue intense et prolong√©e", champ: "fatigueLevel", op: "in", val: ["marquee", "prostration"] },
            { texte: "Ganglions gonfl√©s multiples", champ: "ganglions", op: "==", val: true },
            { texte: "Ganglions gonfl√©s multiples", champ: "ganglionsLoc", op: "==", val: "multiple" },
            { texte: "Angine", champ: "gorge", op: "==", val: true },
            { texte: "Fi√®vre prolong√©e", champ: "fievreDuree", op: "==", val: "5j-plus" },
            { texte: "Perte d'app√©tit", champ: "appetit", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Signes respiratoires importants", champ: "respiration", op: "==", val: true }
        ],
        urgence: null,
        alertes: [
            "Douleur brutale flanc gauche (rupture rate)",
            "Difficult√©s respiratoires (gros ganglions)",
            "Jaunisse"
        ],
        conseils: [
            "Repos +++",
            "PAS de sport de contact pendant 4-6 semaines (rate fragile)",
            "Parac√©tamol",
            "La fatigue peut durer plusieurs semaines"
        ],
        nonFaire: [
            "Sports de contact",
            "Ampicilline/amoxicilline (√©ruption quasi constante)"
        ]
    },

    cystite: {
        nom: "Cystite (infection urinaire basse)",
        description: "Infection de la vessie. Plus fr√©quente chez les filles. Sans fi√®vre (sinon = py√©lon√©phrite).",
        niveau: "jaune",
        criteres: [
            { texte: "Br√ªlures en urinant", champ: "urinaireTypes", op: "contains", val: "brulure" },
            { texte: "Envies fr√©quentes d'uriner", champ: "urinaireTypes", op: "contains", val: "frequent" },
            { texte: "Urines troubles", champ: "urinaireTypes", op: "contains", val: "trouble" },
            { texte: "Urines malodorantes", champ: "urinaireTypes", op: "contains", val: "odeur" }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Douleur lombaire", champ: "douleurLombaire", op: "==", val: true }
        ],
        urgence: null,
        alertes: [
            "Apparition de fi√®vre",
            "Douleur lombaire",
            "Sang dans les urines abondant"
        ],
        conseils: [
            "Consultation m√©dicale pour analyse d'urines",
            "Boire beaucoup",
            "Uriner fr√©quemment"
        ],
        nonFaire: [
            "Se retenir d'uriner"
        ]
    },

    pyelonephrite: {
        nom: "Py√©lon√©phrite",
        description: "Infection du rein. Plus grave que la cystite. N√©cessite antibiotiques et parfois hospitalisation.",
        niveau: "orange",
        criteres: [
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 38.5 },
            { texte: "Douleur lombaire", champ: "douleurLombaire", op: "==", val: true },
            { texte: "Frissons", champ: "frissons", op: "==", val: true },
            { texte: "Signes urinaires", champ: "urinaire", op: "==", val: true },
            { texte: "Naus√©es/vomissements", champ: "nausees", op: "==", val: true },
            { texte: "Fatigue", champ: "fatigue", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.douleurLombaire && data.fievre && data.confusion,
            message: "Py√©lon√©phrite compliqu√©e - Hospitalisation"
        },
        alertes: [
            "Fi√®vre tr√®s √©lev√©e persistante",
            "Vomissements emp√™chant traitement oral",
            "Alt√©ration √©tat g√©n√©ral"
        ],
        conseils: [
            "Consultation m√©dicale urgente",
            "Antibiotiques indispensables",
            "Bilan sanguin et ECBU"
        ],
        nonFaire: []
    },

    herpangine: {
        nom: "Herpangine",
        description: "Infection virale proche du pieds-mains-bouche. Ulc√©rations uniquement dans la bouche/gorge.",
        niveau: "jaune",
        criteres: [
            { texte: "V√©sicules/ulc√©rations gorge", champ: "aphtes", op: "==", val: true },
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 39 },
            { texte: "Mal de gorge intense", champ: "gorge", op: "==", val: true },
            { texte: "Refus de manger", champ: "appetit", op: "==", val: true }
        ],
        exclusions: [
            { texte: "√âruption mains/pieds", champ: "eruptionLoc", op: "contains", val: "mains" }
        ],
        urgence: null,
        alertes: [
            "D√©shydratation",
            "Fi√®vre persistante > 5 jours"
        ],
        conseils: [
            "Alimentation froide et liquide",
            "Parac√©tamol",
            "√âviter acide et sal√©"
        ],
        nonFaire: []
    },

    conjonctivite: {
        nom: "Conjonctivite",
        description: "Inflammation de la conjonctive. Virale, bact√©rienne ou allergique.",
        niveau: "vert",
        criteres: [
            { texte: "≈íil rouge", champ: "yeuxTypes", op: "contains", val: "rouge" },
            { texte: "Larmoiement", champ: "yeuxTypes", op: "contains", val: "larmoie" },
            { texte: "Paupi√®res coll√©es", champ: "yeuxTypes", op: "contains", val: "colles" },
            { texte: "Yeux", champ: "yeux", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Douleur intense", champ: "cephaleeType", op: "==", val: "intense" },
            { texte: "Photophobie intense", champ: "photophobie", op: "==", val: true }
        ],
        urgence: null,
        alertes: [
            "Douleur oculaire intense",
            "Baisse de vision",
            "Atteinte d'un seul ≈ìil avec douleur",
            "Photophobie marqu√©e"
        ],
        conseils: [
            "Nettoyage au s√©rum physiologique",
            "Consultation si purulent (possible collyre antibiotique)",
            "Lavage des mains fr√©quent",
            "Ne pas partager les linges"
        ],
        nonFaire: [
            "Mettre des collyres sans avis m√©dical"
        ]
    },

    // ============================================
    // OPHTALMOLOGIQUES
    // ============================================

    herpes_oculaire: {
        nom: "Herp√®s oculaire (k√©ratite herp√©tique)",
        description: "Infection de la corn√©e par HSV. URGENCE C√âCITANTE. Traitement antiviral < 24h imp√©ratif.",
        niveau: "rouge",
        criteres: [
            { texte: "≈íil rouge unilat√©ral", champ: "yeuxTypes", op: "contains", val: "rouge" },
            { texte: "Photophobie intense", champ: "photophobie", op: "==", val: true },
            { texte: "Larmoiement", champ: "yeuxTypes", op: "contains", val: "larmoie" },
            { texte: "V√©sicules visage", champ: "eruptionType", op: "==", val: "vesicules" },
            { texte: "V√©sicules visage", champ: "eruptionLoc", op: "contains", val: "visage" }
        ],
        exclusions: [
            { texte: "S√©cr√©tions purulentes", champ: "yeuxTypes", op: "contains", val: "colles" }
        ],
        urgence: {
            condition: (data) => data.yeux && data.photophobie && data.eruptionType === 'vesicules' && data.eruptionLoc && data.eruptionLoc.includes('visage'),
            message: "HERP√àS OCULAIRE - Ophtalmo < 24h - Risque c√©cit√©"
        },
        alertes: [
            "TOUTE suspicion = urgence ophtalmologique < 24h",
            "Baisse de vision = k√©ratite profonde",
            "R√©cidives fr√©quentes"
        ],
        conseils: [
            "Consultation ophtalmologique URGENTE",
            "Aciclovir pommade ophtalmique ou Valaciclovir PO",
            "NE JAMAIS donner de cortico√Ødes locaux sans avis ophtalmo"
        ],
        nonFaire: [
            "Cortico√Ødes locaux (aggravation majeure)",
            "Attendre",
            "Traiter comme conjonctivite banale"
        ]
    },

    zona_ophtalmique: {
        nom: "Zona ophtalmique (V1)",
        description: "R√©activation VZV dans le territoire V1. Si atteinte du nez = atteinte oculaire quasi certaine.",
        niveau: "rouge",
        criteres: [
            { texte: "√âruption v√©siculeuse h√©mifront", champ: "eruptionType", op: "==", val: "vesicules" },
            { texte: "√âruption visage", champ: "eruptionLoc", op: "contains", val: "visage" },
            { texte: "C√©phal√©es", champ: "cephalee", op: "==", val: true },
            { texte: "≈íil rouge", champ: "yeuxTypes", op: "contains", val: "rouge" },
            { texte: "Photophobie", champ: "photophobie", op: "==", val: true },
            { texte: "≈íd√®me palp√©bral", champ: "oedeme", op: "==", val: true },
            { texte: "≈íd√®me palp√©bral", champ: "oedemeLoc", op: "==", val: "oeil" }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.eruptionType === 'vesicules' && data.eruptionLoc && data.eruptionLoc.includes('visage') && data.yeux,
            message: "ZONA V1 - Valaciclovir < 72h - Ophtalmo urgent"
        },
        alertes: [
            "Signe de Hutchinson (nez) = atteinte oculaire quasi certaine",
            "Baisse de vision",
            "Uv√©ite, k√©ratite, r√©tinite possibles"
        ],
        conseils: [
            "Valaciclovir 1g x3/j pendant 7 jours - DANS LES 72H du d√©but",
            "Consultation ophtalmologique syst√©matique si atteinte p√©ri-oculaire",
            "Antalgiques (douleurs intenses)"
        ],
        nonFaire: [
            "Retarder le traitement antiviral",
            "Cortico√Ødes sans couverture antivirale"
        ]
    },

    cellulite_orbitaire: {
        nom: "Cellulite orbitaire",
        description: "Infection des tissus orbitaires. Complication de sinusite. Urgence vitale (extension c√©r√©brale possible).",
        niveau: "rouge",
        criteres: [
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 38.5 },
            { texte: "≈íd√®me palp√©bral important", champ: "oedeme", op: "==", val: true },
            { texte: "≈íd√®me palp√©bral important", champ: "oedemeLoc", op: "==", val: "oeil" },
            { texte: "≈íil rouge", champ: "yeuxTypes", op: "contains", val: "rouge" }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.fievre && data.oedeme && data.oedemeLoc === 'oeil' && data.cephaleeType === 'intense',
            message: "CELLULITE ORBITAIRE - Scanner + ATB IV urgent"
        },
        alertes: [
            "Exophtalmie + ophtalmopl√©gie = cellulite orbitaire",
            "Troubles de conscience = extension intracr√¢nienne",
            "Baisse de vision = compression nerf optique"
        ],
        conseils: [
            "Hospitalisation urgente",
            "Scanner orbites + cr√¢ne",
            "Antibioth√©rapie IV",
            "Avis ORL (drainage sinusien possible)"
        ],
        nonFaire: [
            "Traiter en ambulatoire",
            "Attendre l'√©volution"
        ]
    },

    // ============================================
    // ORL / VOIES A√âRIENNES CRITIQUES
    // ============================================

    epiglottite: {
        nom: "√âpiglottite",
        description: "Infection bact√©rienne de l'√©piglotte. Obstruction rapide des voies a√©riennes. URGENCE VITALE.",
        niveau: "rouge",
        criteres: [
            { texte: "Fi√®vre √©lev√©e brutale", champ: "temp", op: ">=", val: 39 },
            { texte: "Hypersialorrh√©e (bave)", champ: "gorgeType", op: "==", val: "bave" },
            { texte: "Voix √©touff√©e", champ: "voix", op: "==", val: true },
            { texte: "Dyspn√©e", champ: "respiration", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Toux aboyante", champ: "touxType", op: "==", val: "aboyante" }
        ],
        urgence: {
            condition: (data) => data.gorgeType === 'bave' && data.fievre && data.voix,
            message: "√âPIGLOTTITE - SAMU - NE PAS examiner gorge - NE PAS allonger"
        },
        alertes: [
            "TOUS ces signes = URGENCE VITALE",
            "Risque d'obstruction compl√®te brutale"
        ],
        conseils: [
            "APPELER LE 15 IMM√âDIATEMENT",
            "NE PAS examiner la gorge (risque de spasme laryng√© fatal)",
            "NE PAS allonger l'enfant",
            "Laisser en position assise",
            "Intubation en conditions s√©curis√©es au bloc"
        ],
        nonFaire: [
            "Examiner la gorge avec un abaisse-langue",
            "Allonger l'enfant",
            "Tenter de faire boire",
            "Retarder l'appel au SAMU"
        ]
    },

    abces_retropharynge: {
        nom: "Abc√®s r√©tropharyng√©",
        description: "Collection purulente en arri√®re du pharynx. Risque d'obstruction et de m√©diastinite.",
        niveau: "rouge",
        criteres: [
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 38.5 },
            { texte: "Dysphagie importante", champ: "gorgeType", op: "==", val: "avaler" },
            { texte: "Torticolis/raideur nuque", champ: "raideurNuque", op: "==", val: true },
            { texte: "Voix modifi√©e", champ: "voix", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Photophobie", champ: "photophobie", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.fievre && data.gorge && data.raideurNuque && !data.photophobie,
            message: "ABC√àS R√âTROPHARYNG√â - Scanner cervical - ATB IV"
        },
        alertes: [
            "Dyspn√©e = compression voies a√©riennes",
            "M√©diastinite si extension"
        ],
        conseils: [
            "Scanner cervical urgent",
            "Antibioth√©rapie IV",
            "Drainage chirurgical souvent n√©cessaire"
        ],
        nonFaire: [
            "Ponction √† l'aveugle"
        ]
    },

    angine_ludwig: {
        nom: "Angine de Ludwig",
        description: "Cellulite du plancher buccal. Risque d'asphyxie par ≈ìd√®me laryng√©. Souvent origine dentaire.",
        niveau: "rouge",
        criteres: [
            { texte: "Tum√©faction sous-mandibulaire", champ: "oedeme", op: "==", val: true },
            { texte: "Hypersialorrh√©e", champ: "gorgeType", op: "==", val: "bave" },
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Dyspn√©e", champ: "respiration", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.gorge && data.gorgeType === 'bave' && data.respiration,
            message: "ANGINE DE LUDWIG - Risque asphyxie - SAMU"
        },
        alertes: [
            "Dyspn√©e = obstruction imminente",
            "Extension cervicale rapide",
            "M√©diastinite"
        ],
        conseils: [
            "Urgence vitale - SAMU",
            "S√©curisation voies a√©riennes prioritaire",
            "Antibioth√©rapie IV",
            "Drainage chirurgical"
        ],
        nonFaire: [
            "Attendre"
        ]
    },

    // ============================================
    // CARDIOVASCULAIRES
    // ============================================

    myocardite: {
        nom: "Myocardite",
        description: "Inflammation du muscle cardiaque, souvent post-virale. Peut √©voluer vers insuffisance cardiaque ou troubles du rythme.",
        niveau: "orange",
        criteres: [
            { texte: "Fatigue intense post-virale", champ: "fatigueLevel", op: "in", val: ["marquee", "prostration"] },
            { texte: "Dyspn√©e d'effort puis repos", champ: "respiration", op: "==", val: true },
            { texte: "Dyspn√©e d'effort puis repos", champ: "respiType", op: "==", val: "rapide" },
            { texte: "Douleur thoracique", champ: "douleurThorax", op: "==", val: true },
            { texte: "Malaises", champ: "vertiges", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Toux productive", champ: "touxType", op: "==", val: "grasse" },
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 38.5 }
        ],
        urgence: {
            condition: (data) => data.fatigueLevel === 'prostration' && data.respiration && !data.toux && !data.fievre,
            message: "MYOCARDITE suspect√©e - ECG + Troponine urgent"
        },
        alertes: [
            "Syncope",
            "Dyspn√©e de repos",
            "Troubles du rythme",
            "Insuffisance cardiaque"
        ],
        conseils: [
            "ECG + Troponine + BNP",
            "√âchographie cardiaque",
            "Hospitalisation si confirm√©",
            "Repos strict +++ (risque mort subite √† l'effort)"
        ],
        nonFaire: [
            "Sport pendant plusieurs mois",
            "N√©gliger une fatigue anormale post-virale"
        ]
    },

    pericardite: {
        nom: "P√©ricardite / Tamponnade",
        description: "Inflammation du p√©ricarde. Si √©panchement abondant = tamponnade = urgence vitale.",
        niveau: "orange",
        criteres: [
            { texte: "Douleur thoracique", champ: "douleurThorax", op: "==", val: true },
            { texte: "Fi√®vre mod√©r√©e", champ: "fievre", op: "==", val: true },
            { texte: "Dyspn√©e", champ: "respiration", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.respiration && data.fatigueLevel === 'prostration' && data.extremitesFroides,
            message: "TAMPONNADE suspect√©e - √âchographie urgente"
        },
        alertes: [
            "Tamponnade : dyspn√©e + turgescence jugulaire + hypotension + pouls paradoxal",
            "Choc cardiog√©nique"
        ],
        conseils: [
            "ECG (sus-d√©calage ST diffus, sous-d√©calage PR)",
            "√âchographie cardiaque urgente",
            "AINS ou Colchicine si simple",
            "Drainage si tamponnade"
        ],
        nonFaire: []
    },

    endocardite: {
        nom: "Endocardite infectieuse",
        description: "Infection des valves cardiaques. Fi√®vre prolong√©e inexpliqu√©e = √©voquer syst√©matiquement.",
        niveau: "orange",
        criteres: [
            { texte: "Fi√®vre prolong√©e > 5 jours", champ: "fievreDuree", op: "==", val: "5j-plus" },
            { texte: "Fatigue", champ: "fatigue", op: "==", val: true },
            { texte: "Ganglions", champ: "ganglions", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Toux", champ: "toux", op: "==", val: true },
            { texte: "Rhinite", champ: "nez", op: "==", val: true },
            { texte: "Angine", champ: "gorge", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.fievreDuree === '5j-plus' && data.confusion,
            message: "Fi√®vre prolong√©e + confusion - ENDOCARDITE ? - H√©mocultures"
        },
        alertes: [
            "Insuffisance cardiaque",
            "Emboles c√©r√©braux (AVC)",
            "Emboles spl√©niques, r√©naux"
        ],
        conseils: [
            "H√©mocultures multiples AVANT antibioth√©rapie",
            "√âchographie cardiaque (ETO si besoin)",
            "Antibioth√©rapie prolong√©e IV",
            "Avis cardio-chirurgical"
        ],
        nonFaire: [
            "Antibioth√©rapie avant h√©mocultures (sauf sepsis s√©v√®re)"
        ]
    },

    // ============================================
    // NEUROLOGIQUES
    // ============================================

    meningite: {
        nom: "M√©ningite",
        description: "Infection des m√©ninges. URGENCE VITALE. Tout retard peut √™tre fatal.",
        niveau: "rouge",
        criteres: [
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 38.5 },
            { texte: "C√©phal√©es intenses", champ: "cephaleeType", op: "in", val: ["intense", "brutal"] },
            { texte: "Raideur de nuque", champ: "raideurNuque", op: "==", val: true },
            { texte: "Photophobie", champ: "photophobie", op: "==", val: true },
            { texte: "Vomissements en jet", champ: "vomissements", op: "==", val: true },
            { texte: "Confusion/somnolence", champ: "confusion", op: "==", val: true },
            { texte: "Purpura", champ: "eruptionType", op: "==", val: "purpura" }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.raideurNuque && data.fievre && (data.confusion || data.eruptionType === 'purpura'),
            message: "M√âNINGITE - SAMU imm√©diat - Si purpura : C3G sur place"
        },
        alertes: [
            "TOUS ces sympt√¥mes sont des alertes",
            "Purpura = URGENCE ABSOLUE (appeler 15)"
        ],
        conseils: [
            "APPELER LE 15 IMM√âDIATEMENT",
            "Ne pas attendre"
        ],
        nonFaire: [
            "Attendre",
            "Essayer de traiter soi-m√™me"
        ]
    },

    encephalite_herpes: {
        nom: "Enc√©phalite herp√©tique",
        description: "Infection c√©r√©brale par HSV. Mortalit√© > 70% sans traitement. TRAITER AVANT CONFIRMATION.",
        niveau: "rouge",
        criteres: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Confusion/troubles comportement", champ: "confusion", op: "==", val: true },
            { texte: "Convulsions", champ: "convulsions", op: "==", val: true },
            { texte: "C√©phal√©es", champ: "cephaleeType", op: "in", val: ["intense", "brutal"] }
        ],
        exclusions: [
            { texte: "Raideur de nuque franche", champ: "raideurNuque", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.fievre && data.confusion && data.convulsions,
            message: "ENC√âPHALITE HERP√âTIQUE - Aciclovir IV AVANT r√©sultats"
        },
        alertes: [
            "TOUS ces signes = URGENCE ABSOLUE",
            "√âvolution rapide vers coma"
        ],
        conseils: [
            "Aciclovir IV IMM√âDIATEMENT - AVANT r√©sultats",
            "PL + IRM + EEG",
            "Ne pas attendre confirmation pour traiter",
            "R√©animation souvent n√©cessaire"
        ],
        nonFaire: [
            "Attendre la PCR pour traiter",
            "Retarder l'aciclovir"
        ]
    },

    guillain_barre: {
        nom: "Syndrome de Guillain-Barr√©",
        description: "Polyradiculon√©vrite aigu√´ post-infectieuse. Paralysie ascendante. Risque de paralysie respiratoire.",
        niveau: "orange",
        criteres: [
            { texte: "Infection r√©cente (1-4 sem avant)", champ: "diarrhee", op: "==", val: true },
            { texte: "Paresth√©sies extr√©mit√©s", champ: "paresthesies", op: "==", val: true },
            { texte: "Faiblesse musculaire ascendante", champ: "faiblesseMusculaire", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.faiblesseMusculaire && data.respiration,
            message: "Guillain-Barr√© avec atteinte respiratoire - R√©animation"
        },
        alertes: [
            "Atteinte respiratoire (capacit√© vitale < 60%)",
            "Troubles de d√©glutition",
            "Dysautonomie (variations tension/pouls)"
        ],
        conseils: [
            "Hospitalisation syst√©matique",
            "Surveillance capacit√© vitale r√©p√©t√©e",
            "Immunoglobulines IV ou plasmaph√©r√®se",
            "R√©animation si atteinte respiratoire"
        ],
        nonFaire: [
            "Cortico√Ødes (inefficaces)",
            "Traiter en ambulatoire"
        ]
    },

    htic: {
        nom: "Hypertension intracr√¢nienne (HTIC)",
        description: "Augmentation de la pression dans le cr√¢ne. Causes multiples : tumeur, hydroc√©phalie...",
        niveau: "rouge",
        criteres: [
            { texte: "C√©phal√©es matinales", champ: "cephalee", op: "==", val: true },
            { texte: "Vomissements en jet", champ: "vomiFreq", op: "==", val: "incoercible" },
            { texte: "Troubles visuels", champ: "visionTrouble", op: "==", val: true },
            { texte: "Troubles de conscience", champ: "confusion", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.cephalee && data.vomissements && data.confusion && !data.fievre,
            message: "HTIC - Scanner URGENT - NE PAS faire de PL"
        },
        alertes: [
            "Troubles de conscience",
            "Anisocorie (mydriase unilat√©rale) = engagement",
            "Triade de Cushing (HTA + bradycardie + troubles respi)"
        ],
        conseils: [
            "Scanner c√©r√©bral URGENT",
            "NE PAS faire de PL si suspicion HTIC",
            "Position demi-assise",
            "Traitement selon cause"
        ],
        nonFaire: [
            "PL si HTIC suspect√©e (risque d'engagement)",
            "Retarder l'imagerie"
        ]
    },

    avc_pediatrique: {
        nom: "AVC p√©diatrique",
        description: "Rare mais existe. Retard diagnostic fr√©quent car '√ßa n'arrive pas aux enfants'.",
        niveau: "rouge",
        criteres: [
            { texte: "D√©ficit neurologique brutal", champ: "faiblesseMusculaire", op: "==", val: true },
            { texte: "C√©phal√©e brutale intense", champ: "cephaleeType", op: "==", val: "brutal" },
            { texte: "Troubles de conscience", champ: "confusion", op: "==", val: true },
            { texte: "Convulsions", champ: "convulsions", op: "==", val: true },
            { texte: "Troubles visuels", champ: "visionTrouble", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.cephaleeType === 'brutal' && data.confusion && !data.fievre,
            message: "AVC - Imagerie URGENTE - Thrombolyse si < 4h30"
        },
        alertes: [
            "Tous ces signes = imagerie urgente"
        ],
        conseils: [
            "IRM c√©r√©brale en urgence (ou scanner si IRM non dispo)",
            "Thrombolyse possible si < 4h30 (selon protocole)",
            "Recherche √©tiologique (cardiopathie, dr√©panocytose, SAPL...)"
        ],
        nonFaire: [
            "Retarder car 'c'est un enfant, √ßa ne peut pas √™tre un AVC'"
        ]
    },

    // ============================================
    // INFECTIEUSES GRAVES
    // ============================================

    sepsis_choc: {
        nom: "Sepsis / Choc septique",
        description: "R√©ponse inflammatoire syst√©mique √† une infection. Mortalit√© √©lev√©e. Chaque heure compte.",
        niveau: "rouge",
        criteres: [
            { texte: "Fi√®vre (ou hypothermie)", champ: "fievre", op: "==", val: true },
            { texte: "Extr√©mit√©s froides", champ: "extremitesFroides", op: "==", val: true },
            { texte: "Marbrures", champ: "paleurType", op: "==", val: "marbrures" },
            { texte: "Confusion/agitation", champ: "confusion", op: "==", val: true },
            { texte: "Polypn√©e", champ: "respiType", op: "==", val: "rapide" }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.extremitesFroides && data.paleurType === 'marbrures' && data.confusion,
            message: "SEPSIS / CHOC - ATB < 1h - Remplissage - SAMU"
        },
        alertes: [
            "qSOFA ‚â• 2 (confusion, PAS < 100, FR > 22)",
            "Hypotension r√©fractaire au remplissage = choc septique"
        ],
        conseils: [
            "Antibioth√©rapie large spectre < 1 HEURE",
            "Remplissage vasculaire",
            "Pr√©l√®vements (mais ne retardent pas ATB)",
            "R√©animation si choc"
        ],
        nonFaire: [
            "Attendre les r√©sultats pour traiter"
        ]
    },

    fasciite_necrosante: {
        nom: "Fasciite n√©crosante",
        description: "Infection n√©crosante des tissus mous. Progression de plusieurs cm/heure. Mortalit√© √©lev√©e.",
        niveau: "rouge",
        criteres: [
            { texte: "Fi√®vre √©lev√©e", champ: "temp", op: ">=", val: 39 },
            { texte: "√âruption/l√©sion cutan√©e", champ: "eruption", op: "==", val: true },
            { texte: "Prostration", champ: "fatigueLevel", op: "==", val: "prostration" },
            { texte: "Extr√©mit√©s froides", champ: "extremitesFroides", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.temp >= 40 && data.eruption && data.fatigueLevel === 'prostration',
            message: "FASCIITE N√âCROSANTE - Chirurgie urgente - ATB IV"
        },
        alertes: [
            "TOUS ces signes = URGENCE VITALE",
            "Progression horaire"
        ],
        conseils: [
            "Chirurgie de d√©bridement URGENTE",
            "Antibioth√©rapie large spectre IV",
            "R√©animation"
        ],
        nonFaire: [
            "Traiter comme cellulite simple",
            "Attendre pour voir l'√©volution"
        ]
    },

    choc_toxique: {
        nom: "Syndrome de choc toxique",
        description: "Choc li√© √† toxines staphylococciques ou streptococciques. Contexte : plaie, varicelle surinfect√©e...",
        niveau: "rouge",
        criteres: [
            { texte: "Fi√®vre √©lev√©e brutale", champ: "temp", op: ">=", val: 39 },
            { texte: "√âruption diffuse", champ: "eruption", op: "==", val: true },
            { texte: "√âruption tronc", champ: "eruptionLoc", op: "contains", val: "tronc" },
            { texte: "Vomissements/diarrh√©e", champ: "vomissements", op: "==", val: true },
            { texte: "Courbatures intenses", champ: "courbatures", op: "==", val: true },
            { texte: "Confusion", champ: "confusion", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.temp >= 40 && data.eruption && data.confusion,
            message: "CHOC TOXIQUE - R√©animation - ATB anti-staph"
        },
        alertes: [
            "Choc = urgence vitale"
        ],
        conseils: [
            "R√©animation",
            "Retrait corps √©tranger",
            "Antibioth√©rapie anti-staph/strepto",
            "Immunoglobulines discut√©es"
        ],
        nonFaire: []
    },

    botulisme: {
        nom: "Botulisme",
        description: "Intoxication par toxine botulique (conserves maison). Paralysie descendante. URGENCE VITALE.",
        niveau: "rouge",
        criteres: [
            { texte: "Vision trouble/double", champ: "visionTrouble", op: "==", val: true },
            { texte: "Paupi√®res tombantes", champ: "paupieresTombantes", op: "==", val: true },
            { texte: "Difficult√©s √† parler", champ: "difficulteParler", op: "==", val: true },
            { texte: "Difficult√©s √† avaler", champ: "gorgeType", op: "==", val: "avaler" },
            { texte: "Faiblesse musculaire", champ: "faiblesseMusculaire", op: "==", val: true },
            { texte: "Constipation", champ: "constipation", op: "==", val: true },
            { texte: "Bouche s√®che", champ: "langueType", op: "==", val: "seche" },
            { texte: "Conserves maison", champ: "conserveMaison", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.visionTrouble && data.faiblesseMusculaire && !data.fievre,
            message: "BOTULISME - Paralysie descendante - R√©animation - S√©rum"
        },
        alertes: [
            "TOUS ces sympt√¥mes sont des alertes",
            "Difficult√©s respiratoires = URGENCE EXTR√äME"
        ],
        conseils: [
            "APPELER LE 15 IMM√âDIATEMENT",
            "Ne pas attendre l'aggravation",
            "Conserver les aliments suspects"
        ],
        nonFaire: [
            "Attendre"
        ]
    },

    // ============================================
    // M√âTABOLIQUES
    // ============================================

    acidocetose: {
        nom: "Acidoc√©tose diab√©tique",
        description: "Complication aigu√´ du diab√®te (souvent r√©v√©latrice chez l'enfant). Souvent confondue avec gastro.",
        niveau: "rouge",
        criteres: [
            { texte: "D√©shydratation", champ: "deshydratation", op: "==", val: true },
            { texte: "Naus√©es/vomissements", champ: "vomissements", op: "==", val: true },
            { texte: "Douleurs abdominales", champ: "douleurAbdo", op: "==", val: true },
            { texte: "Polypn√©e ample", champ: "respiType", op: "==", val: "rapide" },
            { texte: "Confusion", champ: "confusion", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.deshydratation && data.respiType === 'rapide' && data.confusion && !data.fievre,
            message: "ACIDOC√âTOSE - Glyc√©mie urgente - Insuline IVSE"
        },
        alertes: [
            "Tous ces signes = urgence vitale"
        ],
        conseils: [
            "Glyc√©mie capillaire IMM√âDIATE (> 2.5 g/L)",
            "Bandelette urinaire (glycosurie, c√©tonurie)",
            "R√©hydratation prudente",
            "Insuline IVSE",
            "Potassium √† surveiller"
        ],
        nonFaire: [
            "Insuline rapide SC bolus (risque hypokali√©mie brutale)",
            "Bicarbonates (sauf pH < 6.9)"
        ]
    },

    insuffisance_surrenale: {
        nom: "Insuffisance surr√©nale aigu√´",
        description: "D√©ficit en cortisol. Contexte : arr√™t brutal de cortico√Ødes. Choc hypovol√©mique.",
        niveau: "rouge",
        criteres: [
            { texte: "Prostration", champ: "fatigueLevel", op: "==", val: "prostration" },
            { texte: "Naus√©es/vomissements", champ: "vomissements", op: "==", val: true },
            { texte: "Douleurs abdominales", champ: "douleurAbdo", op: "==", val: true },
            { texte: "D√©shydratation", champ: "deshydratation", op: "==", val: true },
            { texte: "Confusion", champ: "confusion", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.fatigueLevel === 'prostration' && data.vomissements && data.deshydratation,
            message: "INSUFFISANCE SURR√âNALE - Hydrocortisone IV imm√©diat"
        },
        alertes: [
            "Choc r√©fractaire au remplissage"
        ],
        conseils: [
            "Hydrocortisone IV IMM√âDIATEMENT (100 mg puis 50 mg/6h)",
            "Remplissage NaCl 0.9%",
            "Glucose si hypoglyc√©mie"
        ],
        nonFaire: [
            "Attendre le dosage de cortisol pour traiter"
        ]
    },

    // ============================================
    // H√âMATOLOGIQUES
    // ============================================

    leucemie_aigue: {
        nom: "Leuc√©mie aigu√´",
        description: "Cancer des cellules sanguines. Pr√©sentation trompeuse. NFS syst√©matique si doute.",
        niveau: "orange",
        criteres: [
            { texte: "P√¢leur progressive", champ: "paleur", op: "==", val: true },
            { texte: "Fatigue persistante", champ: "fatigueLevel", op: "in", val: ["marquee", "prostration"] },
            { texte: "Ecchymoses/p√©t√©chies spontan√©es", champ: "saignements", op: "==", val: true },
            { texte: "Ad√©nopathies multiples", champ: "ganglionsLoc", op: "==", val: "multiple" },
            { texte: "Douleurs osseuses", champ: "douleurArticulaire", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.paleur && data.saignements && data.ganglionsLoc === 'multiple',
            message: "Suspicion h√©mopathie - NFS URGENTE"
        },
        alertes: [
            "Hyperleucocytose majeure (risque leucostase)",
            "Syndrome h√©morragique",
            "Syndrome de lyse tumorale"
        ],
        conseils: [
            "NFS EN URGENCE",
            "Frottis sanguin",
            "Hospitalisation imm√©diate si confirm√©",
            "Ne pas transfuser sans avis h√©mato"
        ],
        nonFaire: [
            "Transfusion plaquettaire sans avis (risque CIVD)"
        ]
    },

    shu: {
        nom: "Syndrome H√©molytique et Ur√©mique (SHU)",
        description: "Triade an√©mie h√©molytique + thrombop√©nie + insuffisance r√©nale. Souvent post-diarrh√©e E.coli.",
        niveau: "rouge",
        criteres: [
            { texte: "Diarrh√©e sanglante r√©cente", champ: "diarrheeCouleur", op: "==", val: "sang" },
            { texte: "P√¢leur brutale", champ: "paleur", op: "==", val: true },
            { texte: "Ict√®re", champ: "ictere", op: "==", val: true },
            { texte: "Oligurie/anurie", champ: "deshSignes", op: "contains", val: "pasurines" },
            { texte: "D√©shydratation", champ: "deshydratation", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.diarrheeCouleur === 'sang' && data.paleur && data.deshSignes && data.deshSignes.includes('pasurines'),
            message: "SHU - Fonction r√©nale urgente - Dialyse probable"
        },
        alertes: [
            "Anurie",
            "HTA s√©v√®re",
            "Convulsions (atteinte c√©r√©brale)"
        ],
        conseils: [
            "NFS, schizocytes, cr√©atinine, LDH en urgence",
            "Hospitalisation n√©phro-p√©diatrique",
            "Dialyse souvent n√©cessaire",
            "√âculizumab discut√©"
        ],
        nonFaire: [
            "Antibiotiques si diarrh√©e (augmentent risque SHU)",
            "Anti-diarrh√©iques"
        ]
    },

    crise_drepano: {
        nom: "Crise vaso-occlusive dr√©panocytaire",
        description: "Occlusion microvasculaire par h√©maties falciformes. Douleurs osseuses intenses.",
        niveau: "orange",
        criteres: [
            { texte: "Dr√©panocytose connue", champ: "drepanocytose", op: "==", val: true },
            { texte: "Douleurs osseuses intenses", champ: "douleurArticulaire", op: "==", val: true },
            { texte: "Intensit√© s√©v√®re", champ: "articIntensite", op: "==", val: "intense" }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.drepanocytose && data.fievre,
            message: "Dr√©panocytose + fi√®vre - Risque infectieux - Hospitalisation"
        },
        alertes: [
            "Fi√®vre > 38.5¬∞C (risque infection invasive)",
            "Douleur thoracique + dyspn√©e (STA)",
            "Priapisme",
            "AVC",
            "S√©questration spl√©nique (p√¢leur + spl√©nom√©galie brutale)"
        ],
        conseils: [
            "Antalgiques rapidement (morphine si s√©v√®re)",
            "Hyperhydratation",
            "Oxyg√©noth√©rapie si SpO2 < 95%",
            "Hospitalisation si fi√®vre ou signes de gravit√©",
            "Transfusion si STA, AVC, s√©questration"
        ],
        nonFaire: [
            "Sous-estimer la douleur",
            "Retarder les antalgiques"
        ]
    },

    syndrome_thoracique_aigu: {
        nom: "Syndrome thoracique aigu (STA)",
        description: "Complication grave de la dr√©panocytose. Infiltrat pulmonaire + sympt√¥mes respiratoires.",
        niveau: "rouge",
        criteres: [
            { texte: "Dr√©panocytose connue", champ: "drepanocytose", op: "==", val: true },
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Douleur thoracique", champ: "douleurThorax", op: "==", val: true },
            { texte: "Dyspn√©e", champ: "respiration", op: "==", val: true },
            { texte: "Toux", champ: "toux", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.drepanocytose && data.fievre && data.respiration,
            message: "SYNDROME THORACIQUE AIGU - Transfusion urgente"
        },
        alertes: [
            "Tous ces signes = hospitalisation urgente",
            "D√©gradation respiratoire rapide possible"
        ],
        conseils: [
            "Hospitalisation imm√©diate",
            "Oxyg√©noth√©rapie",
            "Antalgiques",
            "Transfusion / √©change transfusionnel",
            "Antibioth√©rapie"
        ],
        nonFaire: [
            "Traiter en ambulatoire"
        ]
    },

    // ============================================
    // UROLOGIQUES / GYN√âCOLOGIQUES
    // ============================================

    torsion_testiculaire: {
        nom: "Torsion testiculaire",
        description: "Torsion du cordon spermatique avec isch√©mie testiculaire. URGENCE CHIRURGICALE < 6h.",
        niveau: "rouge",
        criteres: [
            { texte: "Douleur testiculaire", champ: "douleurTesticule", op: "==", val: true },
            { texte: "D√©but brutal", champ: "testiculeDebut", op: "==", val: "brutal" },
            { texte: "Testicule ascensionn√©", champ: "testiculeSignes", op: "contains", val: "haut" },
            { texte: "Testicule gonfl√©", champ: "testiculeSignes", op: "contains", val: "gonfle" },
            { texte: "Naus√©es/vomissements", champ: "testiculeSignes", op: "contains", val: "nausees" }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "testiculeSignes", op: "contains", val: "fievre" }
        ],
        urgence: {
            condition: (data) => data.douleurTesticule && data.testiculeDebut === 'brutal',
            message: "TORSION TESTICULAIRE - Chirurgie < 6h"
        },
        alertes: [
            "TOUS ces sympt√¥mes = URGENCE ABSOLUE",
            "D√©lai < 6h pour sauver le testicule"
        ],
        conseils: [
            "APPELER LE 15 / Urgences IMM√âDIATEMENT",
            "Chirurgie urgente (d√©torsion + orchidopexie)",
            "NE PAS attendre"
        ],
        nonFaire: [
            "Attendre",
            "Traiter comme infection",
            "Manipuler le testicule soi-m√™me"
        ]
    },

    orchiepididymite: {
        nom: "Orchi-√©pididymite",
        description: "Inflammation infectieuse du testicule et de l'√©pididyme. D√©but progressif avec fi√®vre.",
        niveau: "jaune",
        criteres: [
            { texte: "Douleur testiculaire", champ: "douleurTesticule", op: "==", val: true },
            { texte: "D√©but progressif", champ: "testiculeDebut", op: "==", val: "progressif" },
            { texte: "Fi√®vre", champ: "testiculeSignes", op: "contains", val: "fievre" },
            { texte: "Testicule gonfl√©", champ: "testiculeSignes", op: "contains", val: "gonfle" }
        ],
        exclusions: [
            { texte: "D√©but brutal", champ: "testiculeDebut", op: "==", val: "brutal" },
            { texte: "Testicule ascensionn√©", champ: "testiculeSignes", op: "contains", val: "haut" }
        ],
        urgence: null,
        alertes: [
            "En cas de doute avec torsion ‚Üí Urgences chirurgicales",
            "Toute douleur testiculaire brutale = torsion jusqu'√† preuve du contraire"
        ],
        conseils: [
            "Consultation m√©dicale n√©cessaire",
            "Antibioth√©rapie adapt√©e",
            "Repos, suspensoir"
        ],
        nonFaire: [
            "N√©gliger une douleur testiculaire brutale chez l'adolescent"
        ]
    },

    torsion_ovaire: {
        nom: "Torsion d'annexe (ovaire)",
        description: "Torsion du p√©dicule ovarien. Urgence chirurgicale pour sauver l'ovaire.",
        niveau: "rouge",
        criteres: [
            { texte: "Douleur pelvienne", champ: "douleurPelvienne", op: "==", val: true },
            { texte: "D√©but brutal", champ: "pelvienDebut", op: "==", val: "brutal" },
            { texte: "Naus√©es/vomissements", champ: "vomissements", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true },
            { texte: "Signes urinaires", champ: "urinaire", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.douleurPelvienne && data.pelvienDebut === 'brutal' && !data.fievre,
            message: "TORSION ANNEXE - Chirurgie < 6h"
        },
        alertes: [
            "D√©lai < 6h pour sauver l'ovaire"
        ],
        conseils: [
            "√âchographie pelvienne urgente (Doppler)",
            "C≈ìlioscopie chirurgicale",
            "Ne pas attendre"
        ],
        nonFaire: [
            "Traiter comme infection urinaire sans imagerie"
        ]
    },

    geu: {
        nom: "Grossesse extra-ut√©rine (GEU)",
        description: "Grossesse implant√©e hors de l'ut√©rus. Risque de rupture h√©morragique. Urgence vitale.",
        niveau: "rouge",
        criteres: [
            { texte: "Grossesse possible", champ: "grossessePossible", op: "==", val: true },
            { texte: "Retard de r√®gles", champ: "retardRegles", op: "==", val: true },
            { texte: "Douleur pelvienne", champ: "douleurPelvienne", op: "==", val: true },
            { texte: "M√©trorragies noir√¢tres", champ: "metrorragies", op: "==", val: true },
            { texte: "Vertiges/malaise", champ: "vertiges", op: "==", val: true },
            { texte: "Douleur scapulaire", champ: "douleurEpaule", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => (data.grossessePossible || data.retardRegles) && data.douleurPelvienne && (data.paleur || data.vertiges),
            message: "GEU suspect√©e - Œ≤HCG + √âcho urgente - Si choc : SAMU"
        },
        alertes: [
            "Choc h√©morragique si rupture",
            "D√©fense abdominale"
        ],
        conseils: [
            "Œ≤HCG + √©chographie urgente",
            "Chirurgie si rupture",
            "R√©animation si choc"
        ],
        nonFaire: [
            "Exclure le diagnostic car 'elle dit ne pas √™tre enceinte'"
        ]
    },

    priapisme: {
        nom: "Priapisme",
        description: "√ârection prolong√©e douloureuse sans stimulation sexuelle. Urgence urologique. Fr√©quent chez dr√©panocytaires.",
        niveau: "rouge",
        criteres: [
            { texte: "Dr√©panocytose", champ: "drepanocytose", op: "==", val: true },
            { texte: "Douleur testiculaire prolong√©e", champ: "douleurTesticule", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.drepanocytose && data.douleurTesticule,
            message: "PRIAPISME - Urologie < 6h"
        },
        alertes: [
            "D√©lai < 6h pour √©viter s√©quelles d√©finitives (dysfonction √©rectile)"
        ],
        conseils: [
            "Urgence urologique",
            "Ponction des corps caverneux",
            "Injection d'alpha-stimulants",
            "Chez dr√©panocytaire : hydratation, √©change transfusionnel"
        ],
        nonFaire: [
            "Attendre",
            "Application de glace (inefficace)"
        ]
    },

    arthrite_septique: {
        nom: "Arthrite septique",
        description: "Infection bact√©rienne d'une articulation. Urgence pour pr√©server l'articulation.",
        niveau: "orange",
        criteres: [
            { texte: "Articulation gonfl√©e", champ: "membreSignes", op: "contains", val: "gonfle" },
            { texte: "Articulation rouge/chaude", champ: "membreSignes", op: "contains", val: "rouge" },
            { texte: "Douleur intense au mouvement", champ: "articIntensite", op: "==", val: "intense" },
            { texte: "Boiterie/impotence", champ: "membreSignes", op: "contains", val: "boiterie" },
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.fievre && data.douleurArticulaire && data.articIntensite === 'intense',
            message: "ARTHRITE SEPTIQUE - Ponction + ATB urgents"
        },
        alertes: [
            "Tous ces sympt√¥mes n√©cessitent consultation urgente"
        ],
        conseils: [
            "Consultation urgente",
            "Ne pas mobiliser l'articulation",
            "Ponction articulaire souvent n√©cessaire"
        ],
        nonFaire: [
            "Anti-inflammatoires avant diagnostic",
            "Masser ou mobiliser"
        ]
    },

    // ============================================
    // TOXICOLOGIQUES
    // ============================================

    intox_paracetamol: {
        nom: "Intoxication au parac√©tamol",
        description: "H√©patotoxicit√© retard√©e (24-72h). Asymptomatique au d√©but = faussement rassurant. Antidote efficace si < 8h.",
        niveau: "rouge",
        criteres: [
            { texte: "Naus√©es/vomissements", champ: "vomissements", op: "==", val: true },
            { texte: "Douleur HCD", champ: "abdoLoc", op: "==", val: "hcd" },
            { texte: "Ict√®re", champ: "ictere", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.abdoLoc === 'hcd' && data.ictere,
            message: "Intox parac√©tamol suspect√©e - NAC < 8h - Parac√©tamol√©mie H4"
        },
        alertes: [
            "D√©lai > 8h = efficacit√© antidote r√©duite",
            "Parac√©tamol√©mie H4"
        ],
        conseils: [
            "N-ac√©tylcyst√©ine (NAC) le plus t√¥t possible",
            "Efficace m√™me apr√®s 8h (moins bien)",
            "Parac√©tamol√©mie √† H4",
            "Charbon activ√© si < 1h"
        ],
        nonFaire: [
            "Se rassurer car 'pas de sympt√¥mes'",
            "Attendre les sympt√¥mes pour traiter"
        ]
    },

    intox_co: {
        nom: "Intoxication au monoxyde de carbone (CO)",
        description: "Gaz inodore. C√©phal√©es + naus√©es touchant plusieurs personnes = √©vocateur. Urgence vitale.",
        niveau: "rouge",
        criteres: [
            { texte: "C√©phal√©es", champ: "cephalee", op: "==", val: true },
            { texte: "Vertiges", champ: "vertiges", op: "==", val: true },
            { texte: "Naus√©es/vomissements", champ: "vomissements", op: "==", val: true },
            { texte: "Confusion", champ: "confusion", op: "==", val: true },
            { texte: "Cas group√©s", champ: "collectivite", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Fi√®vre", champ: "fievre", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.cephalee && data.vertiges && data.collectivite && !data.fievre,
            message: "INTOX CO - √âvacuer - O2 100% - SAMU"
        },
        alertes: [
            "Perte de connaissance",
            "Troubles du rythme",
            "Grossesse = urgence absolue"
        ],
        conseils: [
            "√âvacuer les lieux, a√©rer",
            "Appeler les secours (15, 18)",
            "Oxyg√®ne 100% MHC",
            "Caisson hyperbare si formes graves"
        ],
        nonFaire: [
            "Rester dans les locaux"
        ]
    },

    // ============================================
    // URGENCES P√âDIATRIQUES SP√âCIFIQUES
    // ============================================

    kawasaki: {
        nom: "Maladie de Kawasaki",
        description: "Vascularite f√©brile aigu√´. Risque de complications coronariennes si non trait√©. Urgence diagnostique.",
        niveau: "orange",
        criteres: [
            { texte: "Fi√®vre ‚â• 5 jours", champ: "fievreDuree", op: "==", val: "5j-plus" },
            { texte: "Conjonctivite bilat√©rale", champ: "yeuxTypes", op: "contains", val: "rouge" },
            { texte: "L√®vres fissur√©es", champ: "levresFissures", op: "==", val: true },
            { texte: "Langue frambois√©e", champ: "langueType", op: "==", val: "framboise" },
            { texte: "√âruption cutan√©e", champ: "eruption", op: "==", val: true },
            { texte: "Ganglions cervicaux", champ: "ganglions", op: "==", val: true }
        ],
        exclusions: [
            { texte: "Toux", champ: "toux", op: "==", val: true },
            { texte: "Rhinite", champ: "nez", op: "==", val: true }
        ],
        urgence: {
            condition: (data) => data.fievreDuree === '5j-plus' && data.yeux && (data.levresFissures || data.langueType === 'framboise'),
            message: "KAWASAKI - Hospitalisation - Immunoglobulines - Risque coronarien"
        },
        alertes: [
            "Tous ces sympt√¥mes n√©cessitent une hospitalisation",
            "Risque d'an√©vrismes coronariens"
        ],
        conseils: [
            "Hospitalisation pour bilan et traitement (immunoglobulines)",
            "√âchocardiographie syst√©matique"
        ],
        nonFaire: [
            "Attendre que la fi√®vre passe"
        ]
    },

    anaphylaxie: {
        nom: "R√©action anaphylactique",
        description: "R√©action allergique s√©v√®re g√©n√©ralis√©e. URGENCE VITALE. Peut √©voluer tr√®s rapidement.",
        niveau: "rouge",
        criteres: [
            { texte: "Urticaire/√©ruption g√©n√©ralis√©e", champ: "eruption", op: "==", val: true },
            { texte: "Gonflement visage/l√®vres/langue", champ: "oedeme", op: "==", val: true },
            { texte: "Gonflement visage/l√®vres/langue", champ: "oedemeLoc", op: "in", val: ["visage", "levres"] },
            { texte: "Difficult√©s respiratoires", champ: "respiration", op: "==", val: true },
            { texte: "Malaise/vertige", champ: "vertiges", op: "==", val: true },
            { texte: "Naus√©es/vomissements", champ: "nausees", op: "==", val: true },
            { texte: "P√¢leur", champ: "paleur", op: "==", val: true }
        ],
        exclusions: [],
        urgence: {
            condition: (data) => data.eruption && (data.respiration || (data.oedeme && data.oedemeLoc === 'levres')),
            message: "ANAPHYLAXIE - ADR√âNALINE IM - SAMU"
        },
        alertes: [
            "TOUS ces sympt√¥mes sont des alertes majeures"
        ],
        conseils: [
            "APPELER LE 15 IMM√âDIATEMENT",
            "Adr√©naline si stylo disponible (Anapen, EpiPen)",
            "Position allong√©e jambes sur√©lev√©es (sauf si g√™ne respiratoire)",
            "Ne jamais laisser seul"
        ],
        nonFaire: [
            "Attendre",
            "Faire asseoir ou debout si malaise"
        ]
    }

};

// ============================================
// MOTEUR DE SCORING G√âN√âRIQUE
// ============================================

function evaluer(data, critere) {
    const v = data[critere.champ];
    
    // Gestion des valeurs vides/absentes
    if (v === null || v === undefined || v === '') {
        if (critere.op === '==' && critere.val === false) return true;
        if (critere.op === '!=' && critere.val === true) return true;
        return false;
    }
    
    switch (critere.op) {
        case '==': return v === critere.val;
        case '!=': return v !== critere.val;
        case '>=': return parseFloat(v) >= critere.val;
        case '<=': return parseFloat(v) <= critere.val;
        case '>': return parseFloat(v) > critere.val;
        case '<': return parseFloat(v) < critere.val;
        case 'in': return critere.val.includes(v);
        case 'contains': return Array.isArray(v) && v.includes(critere.val);
    }
    return false;
}

function scorerMaladie(data, maladie) {
    let score = 0;
    let matches = [];
    
    // Crit√®res positifs
    for (const c of maladie.criteres) {
        if (evaluer(data, c)) {
            score++;
            matches.push(c.texte);
        }
    }
    
    // Exclusions (diminuent le score)
    for (const e of maladie.exclusions || []) {
        if (evaluer(data, e)) {
            score--;
            matches.push('(-) ' + e.texte);
        }
    }
    
    return {
        score: Math.max(0, score),
        max: maladie.criteres.length,
        pourcent: maladie.criteres.length > 0 ? Math.round(100 * Math.max(0, score) / maladie.criteres.length) : 0,
        matches: matches
    };
}

function scorer(data) {
    const resultats = [];
    const drapeaux = [];
    
    for (const [id, m] of Object.entries(maladiesDB)) {
        const r = scorerMaladie(data, m);
        
        // Seulement si score > 0
        if (r.score > 0) {
            resultats.push({
                id: id,
                nom: m.nom,
                niveau: m.niveau,
                description: m.description,
                score: r.score,
                max: r.max,
                pourcent: r.pourcent,
                matches: r.matches,
                alertes: m.alertes,
                conseils: m.conseils,
                nonFaire: m.nonFaire
            });
        }
        
        // V√©rification urgences (red flags)
        if (m.urgence && m.urgence.condition(data)) {
            drapeaux.push({
                niveau: m.niveau,
                maladie: m.nom,
                message: m.urgence.message
            });
        }
    }
    
    // Tri par pourcentage d√©croissant
    resultats.sort((a, b) => b.pourcent - a.pourcent);
    
    return { resultats, drapeaux };
}

// Export pour utilisation
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { maladiesDB, evaluer, scorerMaladie, scorer };
}








// === SWITCH MODE ===
function switchMode(mode) {
    document.querySelectorAll('.mode-switch button').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('#mode-triage, #mode-reverse').forEach(d => d.classList.remove('active'));
    document.getElementById('mode-' + mode).classList.add('active');
    event.target.classList.add('active');
}

// === TOGGLE SUB-OPTIONS ===
function toggleSub(checkbox) {
    const subId = 'sub-' + checkbox.id;
    const subDiv = document.getElementById(subId);
    if (subDiv) subDiv.classList.toggle('visible', checkbox.checked);
}

// === COLLECTE DONN√âES ===
function getVal(name) {
    const el = document.querySelector(`input[name="${name}"]:checked`);
    return el ? el.value : null;
}
function isChecked(id) {
    const el = document.getElementById(id);
    return el ? el.checked : false;
}
function getCheckedValues(name) {
    const els = document.querySelectorAll(`input[name="${name}"]:checked`);
    return Array.from(els).map(e => e.value);
}

function collecterDonnees() {
    return {
        // √âtat g√©n√©ral
        fievre: isChecked('fievre'),
        temp: getVal('temp') ? parseFloat(getVal('temp')) : null,
        fievreDuree: getVal('fievre-duree'),
        fatigue: isChecked('fatigue'),
        fatigueLevel: getVal('fatigue-level'),
        appetit: isChecked('appetit'),
        frissons: isChecked('frissons'),
        courbatures: isChecked('courbatures'),
        douleurYeux: isChecked('douleur-yeux'),
        paleur: isChecked('paleur'),
        paleurType: getVal('paleur-type'),
        douleurThorax: isChecked('douleurThorax'),
        
        // Constantes vitales
        hasSpo2: isChecked('hasSpo2'),
        spo2Val: getVal('spo2-val'),
        hasFc: isChecked('hasFc'),
        fcAge: getVal('fc-age'),
        fcValue: document.getElementById('fc-value')?.value || null,
        hasFr: isChecked('hasFr'),
        frAge: getVal('fr-age'),
        frValue: document.getElementById('fr-value')?.value || null,
        hasTa: isChecked('hasTa'),
        taSys: document.getElementById('ta-sys')?.value || null,
        taDia: document.getElementById('ta-dia')?.value || null,
        hasGlycemie: isChecked('hasGlycemie'),
        glycemieVal: document.getElementById('glycemie-val')?.value || null,
        
        // ORL/Respi
        toux: isChecked('toux'),
        touxType: getVal('toux-type'),
        touxDuree: getVal('toux-duree'),
        touxQuinte: getCheckedValues('toux-quinte'),
        nez: isChecked('nez'),
        nezType: getVal('nez-type'),
        gorge: isChecked('gorge'),
        gorgeType: getVal('gorge-type'),
        voix: isChecked('voix'),
        respiration: isChecked('respiration'),
        respiType: getVal('respi-type'),
        oreille: isChecked('oreille'),
        oreilleEcoul: isChecked('oreilleEcoul'),
        anosmie: isChecked('anosmie'),
        difficulteParler: isChecked('difficulteParler'),
        
        // Digestif
        vomissements: isChecked('vomissements'),
        vomiType: getVal('vomi-type'),
        vomiFreq: getVal('vomi-freq'),
        diarrhee: isChecked('diarrhee'),
        diarrheeType: getVal('diarrhee-type'),
        diarrheeCouleur: getVal('diarrhee-couleur'),
        nausees: isChecked('nausees'),
        douleurAbdo: isChecked('douleurAbdo'),
        abdoLoc: getVal('abdo-loc'),
        abdoCarac: getCheckedValues('abdo-carac'),
        abdoAppend: getCheckedValues('abdo-append'),
        constipation: isChecked('constipation'),
        deshydratation: isChecked('deshydratation'),
        deshSignes: getCheckedValues('desh'),
        
        // Cutan√©
        eruption: isChecked('eruption'),
        eruptionType: getVal('eruption-type'),
        eruptionLoc: getCheckedValues('eruption-loc'),
        eruptionGratte: isChecked('eruptionGratte'),
        eruptionTexture: getCheckedValues('eruption-texture'),
        eruptionEvolution: getVal('eruption-evolution'),
        aphtes: isChecked('aphtes'),
        oedeme: isChecked('oedeme'),
        oedemeLoc: getVal('oedeme-loc'),
        ictere: isChecked('ictere'),
        saignements: isChecked('saignements'),
        saignSignes: getCheckedValues('saign'),
        
        // Neuro
        cephalee: isChecked('cephalee'),
        cephaleeType: getVal('cephalee-type'),
        raideurNuque: isChecked('raideurNuque'),
        convulsions: isChecked('convulsions'),
        confusion: isChecked('confusion'),
        vertiges: isChecked('vertiges'),
        photophobie: isChecked('photophobie'),
        visionTrouble: isChecked('visionTrouble'),
        paupieresTombantes: isChecked('paupieresTombantes'),
        faiblesseMusculaire: isChecked('faiblesseMusculaire'),
        paresthesies: isChecked('paresthesies'),
        
        // Autres
        ganglions: isChecked('ganglions'),
        ganglionsLoc: getVal('ganglions-loc'),
        yeux: isChecked('yeux'),
        yeuxTypes: getCheckedValues('yeux-type'),
        langue: isChecked('langue'),
        langueType: getVal('langue-type'),
        levresFissures: isChecked('levresFissures'),
        douleurArticulaire: isChecked('douleurArticulaire'),
        articIntensite: getVal('artic-intensite'),
        
        // Urinaire
        urinaire: isChecked('urinaire'),
        urinaireTypes: getCheckedValues('urinaire-types'),
        urinesCouleur: getVal('urines-couleur'),
        douleurLombaire: isChecked('douleurLombaire'),
        
        // Ost√©o
        douleurMembre: isChecked('douleurMembre'),
        membreSignes: getCheckedValues('membre-signes'),
        douleurEpaule: isChecked('douleurEpaule'),
        
        // G√©nital gar√ßon
        douleurTesticule: isChecked('douleurTesticule'),
        testiculeDebut: getVal('testicule-debut'),
        testiculeSignes: getCheckedValues('testicule-signes'),
        
        // Gyn√©co
        douleurPelvienne: isChecked('douleurPelvienne'),
        pelvienDebut: getVal('pelvien-debut'),
        metrorragies: isChecked('metrorragies'),
        retardRegles: isChecked('retardRegles'),
        grossessePossible: isChecked('grossessePossible'),
        
        // Contexte
        repasSuspect: isChecked('repasSuspect'),
        conserveMaison: isChecked('conserveMaison'),
        collectivite: isChecked('collectivite'),
        baignade: isChecked('baignade'),
        drepanocytose: isChecked('drepanocytose'),
        immunodepression: isChecked('immunodepression'),
        zonePalu: isChecked('zonePalu'),
        paluZone: getVal('palu-zone'),
        vaccinStatut: getVal('vaccin-statut')
    };
}

// === MAPPING CHAMPS DB -> DONN√âES UTILISATEUR ===
// Pour savoir si un crit√®re de la DB est coch√© par l'utilisateur
function champEstCoche(data, critere) {
    return evaluer(data, critere);
}

// === ANALYSER ===
function analyser() {
    const data = collecterDonnees();
    console.log('Donn√©es:', data);
    
    // V√©rifier qu'il y a au moins un sympt√¥me
    const hasSymptom = Object.values(data).some(v => v === true || (Array.isArray(v) && v.length > 0) || (typeof v === 'number'));
    if (!hasSymptom) {
        alert('Veuillez cocher au moins un sympt√¥me.');
        return;
    }
    
    // Utiliser le scorer de maladiesDB.js
    const { resultats, drapeaux } = scorer(data);
    
    // IDs des maladies avec drapeau d'urgence
    const maladiesAvecDrapeau = new Set(drapeaux.map(d => {
        // Trouver l'ID de la maladie depuis son nom
        for (const [id, m] of Object.entries(maladiesDB)) {
            if (m.nom === d.maladie) return id;
        }
        return null;
    }).filter(Boolean));
    
    // Filtrer selon seuil : 2/3, 3/4, 4/5+
    // SAUF si la maladie a un drapeau d'urgence
    const resultatsFiltres = resultats.filter(r => {
        // Toujours garder les maladies avec drapeau
        if (maladiesAvecDrapeau.has(r.id)) return true;
        
        const nbCriteres = r.max;
        const nbMatchsPositifs = r.matches.filter(m => !m.startsWith('(-)')).length;
        if (nbCriteres <= 3) return nbMatchsPositifs >= 2;
        if (nbCriteres === 4) return nbMatchsPositifs >= 3;
        return nbMatchsPositifs >= 4; // 5 crit√®res ou plus
    });
    
    afficherResultat(resultatsFiltres, drapeaux, data);
}

// === TRIAGE OFFICIEL (CTAS / ESI / FRENCH) ===
function calculerTriageOfficiel(data, drapeaux) {
    
    // Analyse des constantes vitales
    let fcAlerte = null;
    if (data.hasFc && data.fcValue && data.fcAge) {
        const fc = parseInt(data.fcValue);
        const fcMax = { '6-8': 110, '9-12': 105, '13-15': 100 };
        const fcMin = { '6-8': 70, '9-12': 65, '13-15': 60 };
        if (fc > 170 || fc < 50) fcAlerte = 'rouge';
        else if (fc > fcMax[data.fcAge] + 30 || fc < fcMin[data.fcAge] - 10) fcAlerte = 'orange';
    }
    
    let frAlerte = null;
    if (data.hasFr && data.frValue && data.frAge) {
        const fr = parseInt(data.frValue);
        const frMax = { '6-8': 24, '9-12': 22, '13-15': 20 };
        if (fr > 40 || fr < 10) frAlerte = 'rouge';
        else if (fr > frMax[data.frAge] + 8) frAlerte = 'orange';
    }
    
    let taAlerte = null;
    if (data.hasTa && data.taSys) {
        const sys = parseInt(data.taSys);
        if (sys < 70 || sys > 180) taAlerte = 'rouge';
        else if (sys < 85 || sys > 140) taAlerte = 'orange';
    }
    
    let glycemieAlerte = null;
    if (data.hasGlycemie && data.glycemieVal) {
        const gly = parseFloat(data.glycemieVal);
        if (gly < 0.4 || gly > 4) glycemieAlerte = 'rouge';
        else if (gly < 0.6 || gly > 2.5) glycemieAlerte = 'orange';
    }
    
    // ===== CTAS (Canadian Triage and Acuity Scale) =====
    let ctas = 5;
    let ctasRaison = "Pas de crit√®re de gravit√© identifi√©";
    
    // CTAS 1 - R√©animation
    if (drapeaux.length > 0 ||
        data.convulsions ||
        data.respiType === 'cyanose' ||
        data.fatigueLevel === 'prostration' ||
        data.confusion ||
        (data.faiblesseMusculaire && data.respiration) ||
        (data.hasSpo2 && data.spo2Val === '90') ||
        fcAlerte === 'rouge' || frAlerte === 'rouge' || taAlerte === 'rouge' || glycemieAlerte === 'rouge') {
        ctas = 1;
        ctasRaison = "D√©tresse vitale / Drapeau rouge critique";
    }
    // CTAS 2 - Tr√®s urgent
    else if (
        data.respiType === 'tirage' ||
        (data.hasSpo2 && data.spo2Val === '92') ||
        data.cephaleeType === 'brutal' ||
        data.paleurType === 'marbrures' ||
        data.gorgeType === 'bave' ||
        (data.fievre && data.temp >= 40 && data.fatigueLevel === 'marquee') ||
        (data.fievre && data.raideurNuque) ||
        (data.fievre && data.eruptionType === 'purpura') ||
        (data.abdoCarac && data.abdoCarac.includes('defense')) ||
        (data.saignements && data.fievre) ||
        fcAlerte === 'orange' || frAlerte === 'orange' || taAlerte === 'orange' || glycemieAlerte === 'orange') {
        ctas = 2;
        ctasRaison = "Signes de gravit√© n√©cessitant √©valuation rapide";
    }
    // CTAS 3 - Urgent
    else if (
        (data.fievre && data.temp >= 39) ||
        data.deshydratation ||
        data.vomiFreq === 'incoercible' ||
        data.respiType === 'rapide' || data.respiType === 'sifflante' ||
        data.touxType === 'aboyante' ||
        (data.douleurAbdo && data.abdoLoc === 'fid') ||
        (data.douleurLombaire && data.fievre) ||
        data.ictere) {
        ctas = 3;
        ctasRaison = "Sympt√¥mes n√©cessitant √©valuation dans les 30 min";
    }
    // CTAS 4 - Moins urgent
    else if (
        (data.fievre && data.temp >= 38) ||
        data.toux || data.nez || data.gorge ||
        data.oreille ||
        data.vomissements || data.diarrhee ||
        data.douleurAbdo ||
        data.eruption ||
        data.urinaire) {
        ctas = 4;
        ctasRaison = "Sympt√¥mes stables, √©valuation dans l'heure";
    }
    
    // ===== ESI (Emergency Severity Index, USA) =====
    let esi = 5;
    let esiRaison = "Consultation simple, peu de ressources";
    
    // ESI 1 - Intervention imm√©diate
    if (drapeaux.length > 0 ||
        data.convulsions ||
        data.respiType === 'cyanose' ||
        data.fatigueLevel === 'prostration' ||
        (data.faiblesseMusculaire && data.respiration) ||
        (data.hasSpo2 && data.spo2Val === '90') ||
        fcAlerte === 'rouge' || frAlerte === 'rouge' || taAlerte === 'rouge' || glycemieAlerte === 'rouge') {
        esi = 1;
        esiRaison = "Intervention vitale imm√©diate requise";
    }
    // ESI 2 - Haut risque
    else if (
        data.confusion ||
        data.respiType === 'tirage' ||
        (data.hasSpo2 && data.spo2Val === '92') ||
        data.cephaleeType === 'brutal' ||
        (data.abdoCarac && data.abdoCarac.includes('defense')) ||
        (data.fievre && data.temp >= 40) ||
        data.paleurType === 'marbrures' ||
        data.gorgeType === 'bave' ||
        fcAlerte === 'orange' || frAlerte === 'orange' || taAlerte === 'orange' || glycemieAlerte === 'orange') {
        esi = 2;
        esiRaison = "Haut risque, ne doit pas attendre";
    }
    // ESI 3 - Multiple ressources
    else if (
        (data.fievre && data.temp >= 39) ||
        data.deshydratation ||
        (data.douleurAbdo && (data.abdoLoc === 'fid' || (data.abdoCarac && data.abdoCarac.includes('migration')))) ||
        (data.douleurLombaire && data.fievre) ||
        data.respiration ||
        data.ictere ||
        (data.membreSignes && data.membreSignes.includes('gonfle') && data.fievre)) {
        esi = 3;
        esiRaison = "Plusieurs examens/ressources probables";
    }
    // ESI 4 - Une ressource
    else if (
        data.fievre ||
        data.oreille ||
        data.gorge ||
        data.urinaire ||
        data.eruption ||
        data.vomissements || data.diarrhee) {
        esi = 4;
        esiRaison = "Une ressource (exam/prescription) probable";
    }
    
    // ===== FRENCH (SAMU / SFMU) =====
    let french = 4;
    let frenchRaison = "Consultation de m√©decine g√©n√©rale";
    
    // P1 - Urgence absolue
    if (drapeaux.length > 0 ||
        data.convulsions ||
        data.respiType === 'cyanose' ||
        data.fatigueLevel === 'prostration' ||
        data.confusion ||
        (data.fievre && data.raideurNuque) ||
        (data.fievre && data.eruptionType === 'purpura') ||
        (data.faiblesseMusculaire && data.respiration) ||
        (data.oedemeLoc === 'levres' && data.respiration) ||
        (data.hasSpo2 && data.spo2Val === '90') ||
        fcAlerte === 'rouge' || frAlerte === 'rouge' || taAlerte === 'rouge' || glycemieAlerte === 'rouge') {
        french = 1;
        frenchRaison = "Urgence vitale - SAMU 15";
    }
    // P2 - Urgence vraie
    else if (
        data.respiType === 'tirage' ||
        (data.abdoCarac && data.abdoCarac.includes('defense')) ||
        (data.fievre && data.temp >= 40) ||
        data.paleurType === 'marbrures' ||
        data.cephaleeType === 'brutal' ||
        data.gorgeType === 'bave' ||
        (data.saignements && data.fievre) ||
        (data.hasSpo2 && data.spo2Val === '92') ||
        fcAlerte === 'orange' || frAlerte === 'orange' || taAlerte === 'orange' || glycemieAlerte === 'orange') {
        french = 2;
        frenchRaison = "Urgence vraie - Consultation imm√©diate";
    }
    // P3 - Urgence relative
    else if (
        (data.fievre && data.temp >= 39) ||
        data.deshydratation ||
        data.vomiFreq === 'incoercible' ||
        data.touxType === 'aboyante' ||
        (data.douleurAbdo && data.abdoLoc === 'fid') ||
        (data.douleurLombaire && data.fievre) ||
        data.ictere ||
        data.respiration) {
        french = 3;
        frenchRaison = "Urgence relative - Consultation dans la journ√©e";
    }
    
    return {
        ctas: { niveau: ctas, raison: ctasRaison },
        esi: { niveau: esi, raison: esiRaison },
        french: { niveau: french, raison: frenchRaison },
        alertesConstantes: { fc: fcAlerte, fr: frAlerte, ta: taAlerte, glycemie: glycemieAlerte }
    };
}

// === AFFICHAGE R√âSULTATS AVEC CRIT√àRES COLOR√âS ===
function afficherResultat(resultats, drapeaux, data) {
    const div = document.getElementById('resultat');
    let html = '';
    
    // D√©terminer niveau global
    let niveau = 'vert';
    if (drapeaux.length > 0) niveau = 'rouge';
    else if (resultats.length > 0 && resultats[0].niveau === 'rouge') niveau = 'rouge';
    else if (resultats.length > 0 && resultats[0].niveau === 'orange') niveau = 'orange';
    else if (resultats.length > 0) niveau = 'jaune';
    
    const niveaux = {
        rouge: { icon: 'üö®', titre: 'URGENCE - Appeler le 15' },
        orange: { icon: '‚ö†Ô∏è', titre: 'Consultation dans la journ√©e' },
        jaune: { icon: 'üìã', titre: 'Consultation sous 24-48h' },
        vert: { icon: 'üè†', titre: 'Surveillance √† domicile' }
    };
    
    div.className = 'niveau-' + niveau;
    html += `<h3><span style="font-size:1.5em">${niveaux[niveau].icon}</span> ${niveaux[niveau].titre}</h3>`;
    
    // Drapeaux rouges
    if (drapeaux.length > 0) {
        html += '<div class="alerte-rouge"><h4>‚ö†Ô∏è ALERTES URGENTES</h4>';
        drapeaux.forEach(d => html += `<p><strong>${d.maladie}</strong>: ${d.message}</p>`);
        html += '</div>';
    }
    
    // Pathologies candidates avec crit√®res color√©s
    if (resultats.length > 0) {
        html += '<div class="pathologies-probables"><h4>ü©∫ Hypoth√®ses diagnostiques</h4>';
        
        resultats.slice(0, 8).forEach((r, idx) => {
            const m = maladiesDB[r.id];
            html += `<div class="patho-card ${idx === 0 ? 'top' : ''}">`;
            
            // Header
            html += '<div class="patho-header">';
            html += `<strong>${getNiveauIcon(r.niveau)} ${r.nom}</strong>`;
            html += `<span class="patho-score">${r.pourcent}%</span>`;
            html += '</div>';
            
            // Description
            html += `<div class="patho-desc">${r.description}</div>`;
            
            // CRIT√àRES ATTENDUS (bleu p√¢le, cercl√© vert si coch√©)
            // D√©dupliquer par texte, mais cercler vert si AU MOINS UN crit√®re avec ce texte matche
            const criteresParTexte = {};
            m.criteres.forEach(c => {
                if (!criteresParTexte[c.texte]) criteresParTexte[c.texte] = [];
                criteresParTexte[c.texte].push(c);
            });
            html += '<div><small><strong>Crit√®res attendus :</strong></small>';
            html += '<div class="criteres-box">';
            for (const [texte, criteres] of Object.entries(criteresParTexte)) {
                const match = criteres.some(c => champEstCoche(data, c));
                html += `<span class="critere-tag critere-attendu ${match ? 'critere-match' : ''}">${texte}</span>`;
            }
            html += '</div></div>';
            
            // EXCLUSIONS (rouge p√¢le, cercl√© vert si coch√© = probl√®me)
            if (m.exclusions && m.exclusions.length > 0) {
                const exclusionsParTexte = {};
                m.exclusions.forEach(e => {
                    if (!exclusionsParTexte[e.texte]) exclusionsParTexte[e.texte] = [];
                    exclusionsParTexte[e.texte].push(e);
                });
                html += '<div style="margin-top:6px"><small><strong>Filtres n√©gatifs :</strong></small>';
                html += '<div class="criteres-box">';
                for (const [texte, exclusions] of Object.entries(exclusionsParTexte)) {
                    const match = exclusions.some(e => champEstCoche(data, e));
                    html += `<span class="critere-tag critere-exclusion ${match ? 'critere-match' : ''}">${texte}</span>`;
                }
                html += '</div></div>';
            }
            
            html += '</div>';
        });
        
        html += '</div>';
    } else {
        html += '<div class="pathologies-probables"><p>Aucune pathologie ne correspond pr√©cis√©ment aux sympt√¥mes s√©lectionn√©s.</p></div>';
    }
    
    // Conseils
    html += '<div class="conseils"><h4>üí° Conseils g√©n√©raux</h4><ul>';
    if (niveau === 'rouge') {
        html += '<li><strong>Appelez le 15 (SAMU)</strong> ou rendez-vous aux urgences</li>';
    } else if (niveau === 'orange') {
        html += '<li>Consultez un m√©decin aujourd\'hui</li>';
        html += '<li>Si aggravation : appelez le 15</li>';
    } else if (niveau === 'jaune') {
        html += '<li>Prenez rendez-vous avec votre m√©decin</li>';
        html += '<li>Hydratation et repos en attendant</li>';
    } else {
        html += '<li>Repos et hydratation</li>';
        html += '<li>Parac√©tamol si fi√®vre ou douleur</li>';
    }
    html += '</ul></div>';
    
    // Triage officiel (CTAS / ESI / SAMU)
    const triageOfficiel = calculerTriageOfficiel(data, drapeaux);
    
    html += '<div class="pathologies-probables" style="margin-top: 20px; background: #f8f9fa; border: 2px solid #6c757d;">';
    html += '<h4>üìä Niveaux de triage (protocoles officiels)</h4>';
    html += '<p style="font-size: 0.85em; color: #666; margin-bottom: 15px;">Classification selon 3 standards internationaux :</p>';
    
    // CTAS
    const ctasColors = ['', '#dc3545', '#fd7e14', '#ffc107', '#28a745', '#17a2b8'];
    const ctasLabels = ['', 'R√©animation', 'Tr√®s urgent', 'Urgent', 'Moins urgent', 'Non urgent'];
    const ctasDelais = ['', 'Imm√©diat', '< 15 min', '< 30 min', '< 60 min', '< 120 min'];
    html += `<div style="display: flex; align-items: center; padding: 10px; margin: 5px 0; background: white; border-radius: 6px; border-left: 4px solid ${ctasColors[triageOfficiel.ctas.niveau]};">`;
    html += `<span style="font-weight: bold; min-width: 120px;">üá®üá¶ CTAS</span>`;
    html += `<span style="background: ${ctasColors[triageOfficiel.ctas.niveau]}; color: white; padding: 4px 12px; border-radius: 12px; font-weight: bold; margin-right: 10px;">Niveau ${triageOfficiel.ctas.niveau}</span>`;
    html += `<span style="flex: 1;">${ctasLabels[triageOfficiel.ctas.niveau]} (${ctasDelais[triageOfficiel.ctas.niveau]})</span>`;
    html += `</div>`;
    
    // ESI
    const esiColors = ['', '#dc3545', '#fd7e14', '#ffc107', '#28a745', '#17a2b8'];
    const esiLabels = ['', 'R√©animation', 'Haut risque', 'Urgence', 'Peu urgent', 'Non urgent'];
    html += `<div style="display: flex; align-items: center; padding: 10px; margin: 5px 0; background: white; border-radius: 6px; border-left: 4px solid ${esiColors[triageOfficiel.esi.niveau]};">`;
    html += `<span style="font-weight: bold; min-width: 120px;">üá∫üá∏ ESI</span>`;
    html += `<span style="background: ${esiColors[triageOfficiel.esi.niveau]}; color: white; padding: 4px 12px; border-radius: 12px; font-weight: bold; margin-right: 10px;">Niveau ${triageOfficiel.esi.niveau}</span>`;
    html += `<span style="flex: 1;">${esiLabels[triageOfficiel.esi.niveau]}</span>`;
    html += `</div>`;
    
    // French SAMU
    const frenchColors = ['', '#dc3545', '#fd7e14', '#ffc107', '#28a745'];
    const frenchLabels = ['', 'P1 - Urgence absolue', 'P2 - Urgence vraie', 'P3 - Urgence relative', 'P4 - Consultation'];
    html += `<div style="display: flex; align-items: center; padding: 10px; margin: 5px 0; background: white; border-radius: 6px; border-left: 4px solid ${frenchColors[triageOfficiel.french.niveau]};">`;
    html += `<span style="font-weight: bold; min-width: 120px;">üá´üá∑ SAMU</span>`;
    html += `<span style="background: ${frenchColors[triageOfficiel.french.niveau]}; color: white; padding: 4px 12px; border-radius: 12px; font-weight: bold; margin-right: 10px;">${frenchLabels[triageOfficiel.french.niveau].split(' - ')[0]}</span>`;
    html += `<span style="flex: 1;">${frenchLabels[triageOfficiel.french.niveau].split(' - ')[1] || ''}</span>`;
    html += `</div>`;
    
    html += '<p style="font-size: 0.8em; color: #888; margin-top: 10px; margin-bottom: 0;">‚öñÔ∏è Ces classifications sont indicatives et ne remplacent pas l\'avis m√©dical.</p>';
    html += '</div>';
    
    // Alertes constantes vitales
    const ac = triageOfficiel.alertesConstantes;
    if (ac.fc || ac.fr || ac.ta || ac.glycemie) {
        html += '<div class="pathologies-probables" style="margin-top: 15px; background: #fff3cd; border: 2px solid #ffc107;">';
        html += '<h4>‚ö†Ô∏è Constantes vitales anormales</h4><ul>';
        if (ac.fc === 'rouge') html += '<li style="color:#dc3545"><strong>FC critique</strong> - Bradycardie/tachycardie s√©v√®re</li>';
        else if (ac.fc === 'orange') html += '<li style="color:#fd7e14"><strong>FC anormale</strong> - √Ä surveiller</li>';
        if (ac.fr === 'rouge') html += '<li style="color:#dc3545"><strong>FR critique</strong> - D√©tresse respiratoire</li>';
        else if (ac.fr === 'orange') html += '<li style="color:#fd7e14"><strong>FR √©lev√©e</strong> - Polypn√©e</li>';
        if (ac.ta === 'rouge') html += '<li style="color:#dc3545"><strong>TA critique</strong> - Choc ou HTA s√©v√®re</li>';
        else if (ac.ta === 'orange') html += '<li style="color:#fd7e14"><strong>TA anormale</strong> - √Ä surveiller</li>';
        if (ac.glycemie === 'rouge') html += '<li style="color:#dc3545"><strong>Glyc√©mie critique</strong> - Hypo/hyperglyc√©mie s√©v√®re</li>';
        else if (ac.glycemie === 'orange') html += '<li style="color:#fd7e14"><strong>Glyc√©mie anormale</strong> - √Ä contr√¥ler</li>';
        html += '</ul></div>';
    }
    
    // Surveillance
    html += '<div class="surveillance"><h4>üëÅÔ∏è Reconsulter si :</h4><ul>';
    html += '<li>Fi√®vre > 48-72h ou aggravation</li>';
    html += '<li>Difficult√©s respiratoires</li>';
    html += '<li>Prostration, somnolence</li>';
    html += '<li>Refus de boire</li>';
    html += '<li>√âruption qui ne s\'efface pas</li>';
    html += '</ul></div>';
    
    div.innerHTML = html;
    div.style.display = 'block';
    div.scrollIntoView({ behavior: 'smooth' });
}

function getNiveauIcon(niveau) {
    const icons = { vert: 'üü¢', jaune: 'üü°', orange: 'üü†', rouge: 'üî¥' };
    return icons[niveau] || '‚ö™';
}

// === RESET ===
function resetForm() {
    document.querySelectorAll('input[type="checkbox"]').forEach(e => e.checked = false);
    document.querySelectorAll('input[type="radio"]').forEach(e => e.checked = false);
    document.querySelectorAll('.sub-options').forEach(e => e.classList.remove('visible'));
    document.getElementById('resultat').style.display = 'none';
}

// === MODE R√âF√âRENCE : LISTE DYNAMIQUE ===
function genererListeMaladies() {
    const select = document.getElementById('maladie-select');
    
    // Grouper par cat√©gorie (bas√© sur la position dans la DB)
    const categories = {};
    for (const [id, m] of Object.entries(maladiesDB)) {
        // D√©duire cat√©gorie depuis le nom ou utiliser "Autre"
        let cat = 'Autre';
        if (/rhino|angine|otite|laryngite|bronchite|pneumonie|grippe|covid|coqueluche/i.test(id)) cat = 'ORL / Respiratoire';
        else if (/gastro|tiac|appendicite|occlusion|hepatite|invagination|volvulus|pancreatite/i.test(id)) cat = 'Digestif';
        else if (/varicelle|pmb|urticaire|scarlatine|roseole|rougeole|impetigo/i.test(id)) cat = 'Cutan√©';
        else if (/dengue|chikungunya|leptospirose|palu/i.test(id)) cat = 'Arboviroses / Tropical';
        else if (/meningite|encephalite|guillain|htic|avc/i.test(id)) cat = 'Neurologique';
        else if (/kawasaki|anaphylaxie/i.test(id)) cat = 'Urgences p√©diatriques';
        else if (/cystite|pyelonephrite|torsion|geu/i.test(id)) cat = 'Uro-g√©nital';
        else if (/myocardite|pericardite|endocardite/i.test(id)) cat = 'Cardiovasculaire';
        else if (/drepa|shu|leucemie/i.test(id)) cat = 'H√©matologique';
        else if (/intox|botulisme/i.test(id)) cat = 'Toxicologique';
        
        if (!categories[cat]) categories[cat] = [];
        categories[cat].push({ id, nom: m.nom });
    }
    
    // G√©n√©rer les optgroups
    for (const [cat, maladies] of Object.entries(categories)) {
        const optgroup = document.createElement('optgroup');
        optgroup.label = cat;
        maladies.sort((a, b) => a.nom.localeCompare(b.nom));
        maladies.forEach(m => {
            const opt = document.createElement('option');
            opt.value = m.id;
            opt.textContent = m.nom;
            optgroup.appendChild(opt);
        });
        select.appendChild(optgroup);
    }
}

// === AFFICHER MALADIE (R√âF√âRENCE) ===
function afficherMaladie() {
    const select = document.getElementById('maladie-select');
    const detailDiv = document.getElementById('maladie-detail');
    const maladieKey = select.value;
    
    if (!maladieKey) {
        detailDiv.innerHTML = '';
        return;
    }
    
    const m = maladiesDB[maladieKey];
    if (!m) return;
    
    const niveauLabels = {
        vert: 'üü¢ Surveillance √† domicile',
        jaune: 'üü° Consultation sous 24-48h',
        orange: 'üü† Consultation dans la journ√©e',
        rouge: 'üî¥ URGENCE - Appeler le 15'
    };
    
    let html = '<div class="maladie-detail">';
    html += `<h3>${m.nom}</h3>`;
    html += `<p>${m.description}</p>`;
    html += `<span class="section-niveau niveau-${m.niveau}">${niveauLabels[m.niveau]}</span>`;
    
    // Crit√®res (sympt√¥mes attendus)
    if (m.criteres && m.criteres.length > 0) {
        html += '<div class="maladie-section section-symptomes">';
        html += '<h4>‚úÖ Sympt√¥mes typiques</h4><ul>';
        m.criteres.forEach(c => html += `<li>${c.texte}</li>`);
        html += '</ul></div>';
    }
    
    // Exclusions (sympt√¥mes absents)
    if (m.exclusions && m.exclusions.length > 0) {
        html += '<div class="maladie-section section-absents">';
        html += '<h4>‚ùå Sympt√¥mes habituellement absents</h4><ul>';
        m.exclusions.forEach(e => html += `<li>${e.texte}</li>`);
        html += '</ul></div>';
    }
    
    // Alertes
    if (m.alertes && m.alertes.length > 0) {
        html += '<div class="maladie-section section-alertes">';
        html += '<h4>‚ö†Ô∏è Signes d\'alerte</h4><ul>';
        m.alertes.forEach(a => html += `<li>${a}</li>`);
        html += '</ul></div>';
    }
    
    // Conseils
    if (m.conseils && m.conseils.length > 0) {
        html += '<div class="maladie-section section-conseils">';
        html += '<h4>üí° Conseils</h4><ul>';
        m.conseils.forEach(c => html += `<li>${c}</li>`);
        html += '</ul></div>';
    }
    
    // √Ä ne pas faire
    if (m.nonFaire && m.nonFaire.length > 0) {
        html += '<div class="maladie-section section-alertes">';
        html += '<h4>üö´ √Ä ne PAS faire</h4><ul>';
        m.nonFaire.forEach(n => html += `<li>${n}</li>`);
        html += '</ul></div>';
    }
    
    html += '</div>';
    detailDiv.innerHTML = html;
}

// === INIT ===
document.addEventListener('DOMContentLoaded', function() {
    if (typeof maladiesDB !== 'undefined') {
        genererListeMaladies();
    } else {
        console.error('maladiesDB.js non charg√©');
    }
});
</script>
</body>
</html>
